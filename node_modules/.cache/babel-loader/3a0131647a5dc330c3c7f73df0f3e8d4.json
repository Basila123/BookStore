{"ast":null,"code":"'use strict';\n\nconst os = require('os');\n\nconst fs = require('fs');\n\nconst {\n  pathToFileURL\n} = require('url');\n\nconst path = require('path');\n\nconst {\n  extendDefaultPlugins,\n  optimize: optimizeAgnostic,\n  createContentItem\n} = require('./svgo.js');\n\nexports.extendDefaultPlugins = extendDefaultPlugins;\nexports.createContentItem = createContentItem;\n\nconst importConfig = async configFile => {\n  let config; // at the moment dynamic import may randomly fail with segfault\n  // to workaround this for some users .cjs extension is loaded\n  // exclusively with require\n\n  if (configFile.endsWith('.cjs')) {\n    config = require(configFile);\n  } else {\n    try {\n      // dynamic import expects file url instead of path and may fail\n      // when windows path is provided\n      const {\n        default: imported\n      } = await import(pathToFileURL(configFile));\n      config = imported;\n    } catch (importError) {\n      // TODO remove require in v3\n      try {\n        config = require(configFile);\n      } catch (requireError) {\n        // throw original error if es module is detected\n        if (requireError.code === 'ERR_REQUIRE_ESM') {\n          throw importError;\n        } else {\n          throw requireError;\n        }\n      }\n    }\n  }\n\n  if (config == null || typeof config !== 'object' || Array.isArray(config)) {\n    throw Error(`Invalid config file \"${configFile}\"`);\n  }\n\n  return config;\n};\n\nconst isFile = async file => {\n  try {\n    const stats = await fs.promises.stat(file);\n    return stats.isFile();\n  } catch {\n    return false;\n  }\n};\n\nconst loadConfig = async function (configFile) {\n  let cwd = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : process.cwd();\n\n  if (configFile != null) {\n    if (path.isAbsolute(configFile)) {\n      return await importConfig(configFile);\n    } else {\n      return await importConfig(path.join(cwd, configFile));\n    }\n  }\n\n  let dir = cwd; // eslint-disable-next-line no-constant-condition\n\n  while (true) {\n    const js = path.join(dir, 'svgo.config.js');\n\n    if (await isFile(js)) {\n      return await importConfig(js);\n    }\n\n    const mjs = path.join(dir, 'svgo.config.mjs');\n\n    if (await isFile(mjs)) {\n      return await importConfig(mjs);\n    }\n\n    const cjs = path.join(dir, 'svgo.config.cjs');\n\n    if (await isFile(cjs)) {\n      return await importConfig(cjs);\n    }\n\n    const parent = path.dirname(dir);\n\n    if (dir === parent) {\n      return null;\n    }\n\n    dir = parent;\n  }\n};\n\nexports.loadConfig = loadConfig;\n\nconst optimize = (input, config) => {\n  if (config == null) {\n    config = {};\n  }\n\n  if (typeof config !== 'object') {\n    throw Error('Config should be an object');\n  }\n\n  return optimizeAgnostic(input, { ...config,\n    js2svg: {\n      // platform specific default for end of line\n      eol: os.EOL === '\\r\\n' ? 'crlf' : 'lf',\n      ...config.js2svg\n    }\n  });\n};\n\nexports.optimize = optimize;","map":{"version":3,"sources":["/home/hp/Js/React_practise/BookStore/books/node_modules/postcss-svgo/node_modules/svgo/lib/svgo-node.js"],"names":["os","require","fs","pathToFileURL","path","extendDefaultPlugins","optimize","optimizeAgnostic","createContentItem","exports","importConfig","configFile","config","endsWith","default","imported","importError","requireError","code","Array","isArray","Error","isFile","file","stats","promises","stat","loadConfig","cwd","process","isAbsolute","join","dir","js","mjs","cjs","parent","dirname","input","js2svg","eol","EOL"],"mappings":"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","sourcesContent":["'use strict';\n\nconst os = require('os');\nconst fs = require('fs');\nconst { pathToFileURL } = require('url');\nconst path = require('path');\nconst {\n  extendDefaultPlugins,\n  optimize: optimizeAgnostic,\n  createContentItem,\n} = require('./svgo.js');\n\nexports.extendDefaultPlugins = extendDefaultPlugins;\nexports.createContentItem = createContentItem;\n\nconst importConfig = async (configFile) => {\n  let config;\n  // at the moment dynamic import may randomly fail with segfault\n  // to workaround this for some users .cjs extension is loaded\n  // exclusively with require\n  if (configFile.endsWith('.cjs')) {\n    config = require(configFile);\n  } else {\n    try {\n      // dynamic import expects file url instead of path and may fail\n      // when windows path is provided\n      const { default: imported } = await import(pathToFileURL(configFile));\n      config = imported;\n    } catch (importError) {\n      // TODO remove require in v3\n      try {\n        config = require(configFile);\n      } catch (requireError) {\n        // throw original error if es module is detected\n        if (requireError.code === 'ERR_REQUIRE_ESM') {\n          throw importError;\n        } else {\n          throw requireError;\n        }\n      }\n    }\n  }\n  if (config == null || typeof config !== 'object' || Array.isArray(config)) {\n    throw Error(`Invalid config file \"${configFile}\"`);\n  }\n  return config;\n};\n\nconst isFile = async (file) => {\n  try {\n    const stats = await fs.promises.stat(file);\n    return stats.isFile();\n  } catch {\n    return false;\n  }\n};\n\nconst loadConfig = async (configFile, cwd = process.cwd()) => {\n  if (configFile != null) {\n    if (path.isAbsolute(configFile)) {\n      return await importConfig(configFile);\n    } else {\n      return await importConfig(path.join(cwd, configFile));\n    }\n  }\n  let dir = cwd;\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    const js = path.join(dir, 'svgo.config.js');\n    if (await isFile(js)) {\n      return await importConfig(js);\n    }\n    const mjs = path.join(dir, 'svgo.config.mjs');\n    if (await isFile(mjs)) {\n      return await importConfig(mjs);\n    }\n    const cjs = path.join(dir, 'svgo.config.cjs');\n    if (await isFile(cjs)) {\n      return await importConfig(cjs);\n    }\n    const parent = path.dirname(dir);\n    if (dir === parent) {\n      return null;\n    }\n    dir = parent;\n  }\n};\nexports.loadConfig = loadConfig;\n\nconst optimize = (input, config) => {\n  if (config == null) {\n    config = {};\n  }\n  if (typeof config !== 'object') {\n    throw Error('Config should be an object');\n  }\n  return optimizeAgnostic(input, {\n    ...config,\n    js2svg: {\n      // platform specific default for end of line\n      eol: os.EOL === '\\r\\n' ? 'crlf' : 'lf',\n      ...config.js2svg,\n    },\n  });\n};\nexports.optimize = optimize;\n"]},"metadata":{},"sourceType":"script"}