{"ast":null,"code":"'use strict';\n\nconst {\n  removeLeadingZero\n} = require('../lib/svgo/tools.js');\n\nexports.name = 'cleanupListOfValues';\nexports.type = 'visitor';\nexports.active = false;\nexports.description = 'rounds list of values to the fixed precision';\nconst regNumericValues = /^([-+]?\\d*\\.?\\d+([eE][-+]?\\d+)?)(px|pt|pc|mm|cm|m|in|ft|em|ex|%)?$/;\nconst regSeparator = /\\s+,?\\s*|,\\s*/;\nconst absoluteLengths = {\n  // relative to px\n  cm: 96 / 2.54,\n  mm: 96 / 25.4,\n  in: 96,\n  pt: 4 / 3,\n  pc: 16,\n  px: 1\n};\n/**\n * Round list of values to the fixed precision.\n *\n * @example\n * <svg viewBox=\"0 0 200.28423 200.28423\" enable-background=\"new 0 0 200.28423 200.28423\">\n *         ⬇\n * <svg viewBox=\"0 0 200.284 200.284\" enable-background=\"new 0 0 200.284 200.284\">\n *\n * <polygon points=\"208.250977 77.1308594 223.069336 ... \"/>\n *         ⬇\n * <polygon points=\"208.251 77.131 223.069 ... \"/>\n *\n * @author kiyopikko\n *\n * @type {import('../lib/types').Plugin<{\n *   floatPrecision?: number,\n *   leadingZero?: boolean,\n *   defaultPx?: boolean,\n *   convertToPx?: boolean\n * }>}\n */\n\nexports.fn = (_root, params) => {\n  const {\n    floatPrecision = 3,\n    leadingZero = true,\n    defaultPx = true,\n    convertToPx = true\n  } = params;\n  /**\n   * @type {(lists: string) => string}\n   */\n\n  const roundValues = lists => {\n    const roundedList = [];\n\n    for (const elem of lists.split(regSeparator)) {\n      const match = elem.match(regNumericValues);\n      const matchNew = elem.match(/new/); // if attribute value matches regNumericValues\n\n      if (match) {\n        // round it to the fixed precision\n        let num = Number(Number(match[1]).toFixed(floatPrecision));\n        /**\n         * @type {any}\n         */\n\n        let matchedUnit = match[3] || '';\n        /**\n         * @type{'' | keyof typeof absoluteLengths}\n         */\n\n        let units = matchedUnit; // convert absolute values to pixels\n\n        if (convertToPx && units && units in absoluteLengths) {\n          const pxNum = Number((absoluteLengths[units] * Number(match[1])).toFixed(floatPrecision));\n\n          if (pxNum.toString().length < match[0].length) {\n            num = pxNum;\n            units = 'px';\n          }\n        } // and remove leading zero\n\n\n        let str;\n\n        if (leadingZero) {\n          str = removeLeadingZero(num);\n        } else {\n          str = num.toString();\n        } // remove default 'px' units\n\n\n        if (defaultPx && units === 'px') {\n          units = '';\n        }\n\n        roundedList.push(str + units);\n      } // if attribute value is \"new\"(only enable-background).\n      else if (matchNew) {\n        roundedList.push('new');\n      } else if (elem) {\n        roundedList.push(elem);\n      }\n    }\n\n    return roundedList.join(' ');\n  };\n\n  return {\n    element: {\n      enter: node => {\n        if (node.attributes.points != null) {\n          node.attributes.points = roundValues(node.attributes.points);\n        }\n\n        if (node.attributes['enable-background'] != null) {\n          node.attributes['enable-background'] = roundValues(node.attributes['enable-background']);\n        }\n\n        if (node.attributes.viewBox != null) {\n          node.attributes.viewBox = roundValues(node.attributes.viewBox);\n        }\n\n        if (node.attributes['stroke-dasharray'] != null) {\n          node.attributes['stroke-dasharray'] = roundValues(node.attributes['stroke-dasharray']);\n        }\n\n        if (node.attributes.dx != null) {\n          node.attributes.dx = roundValues(node.attributes.dx);\n        }\n\n        if (node.attributes.dy != null) {\n          node.attributes.dy = roundValues(node.attributes.dy);\n        }\n\n        if (node.attributes.x != null) {\n          node.attributes.x = roundValues(node.attributes.x);\n        }\n\n        if (node.attributes.y != null) {\n          node.attributes.y = roundValues(node.attributes.y);\n        }\n      }\n    }\n  };\n};","map":{"version":3,"sources":["/home/hp/Js/React_practise/BookStore/books/node_modules/postcss-svgo/node_modules/svgo/plugins/cleanupListOfValues.js"],"names":["removeLeadingZero","require","exports","name","type","active","description","regNumericValues","regSeparator","absoluteLengths","cm","mm","in","pt","pc","px","fn","_root","params","floatPrecision","leadingZero","defaultPx","convertToPx","roundValues","lists","roundedList","elem","split","match","matchNew","num","Number","toFixed","matchedUnit","units","pxNum","toString","length","str","push","join","element","enter","node","attributes","points","viewBox","dx","dy","x","y"],"mappings":"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","sourcesContent":["'use strict';\n\nconst { removeLeadingZero } = require('../lib/svgo/tools.js');\n\nexports.name = 'cleanupListOfValues';\nexports.type = 'visitor';\nexports.active = false;\nexports.description = 'rounds list of values to the fixed precision';\n\nconst regNumericValues =\n  /^([-+]?\\d*\\.?\\d+([eE][-+]?\\d+)?)(px|pt|pc|mm|cm|m|in|ft|em|ex|%)?$/;\nconst regSeparator = /\\s+,?\\s*|,\\s*/;\nconst absoluteLengths = {\n  // relative to px\n  cm: 96 / 2.54,\n  mm: 96 / 25.4,\n  in: 96,\n  pt: 4 / 3,\n  pc: 16,\n  px: 1,\n};\n\n/**\n * Round list of values to the fixed precision.\n *\n * @example\n * <svg viewBox=\"0 0 200.28423 200.28423\" enable-background=\"new 0 0 200.28423 200.28423\">\n *         ⬇\n * <svg viewBox=\"0 0 200.284 200.284\" enable-background=\"new 0 0 200.284 200.284\">\n *\n * <polygon points=\"208.250977 77.1308594 223.069336 ... \"/>\n *         ⬇\n * <polygon points=\"208.251 77.131 223.069 ... \"/>\n *\n * @author kiyopikko\n *\n * @type {import('../lib/types').Plugin<{\n *   floatPrecision?: number,\n *   leadingZero?: boolean,\n *   defaultPx?: boolean,\n *   convertToPx?: boolean\n * }>}\n */\nexports.fn = (_root, params) => {\n  const {\n    floatPrecision = 3,\n    leadingZero = true,\n    defaultPx = true,\n    convertToPx = true,\n  } = params;\n\n  /**\n   * @type {(lists: string) => string}\n   */\n  const roundValues = (lists) => {\n    const roundedList = [];\n\n    for (const elem of lists.split(regSeparator)) {\n      const match = elem.match(regNumericValues);\n      const matchNew = elem.match(/new/);\n\n      // if attribute value matches regNumericValues\n      if (match) {\n        // round it to the fixed precision\n        let num = Number(Number(match[1]).toFixed(floatPrecision));\n        /**\n         * @type {any}\n         */\n        let matchedUnit = match[3] || '';\n        /**\n         * @type{'' | keyof typeof absoluteLengths}\n         */\n        let units = matchedUnit;\n\n        // convert absolute values to pixels\n        if (convertToPx && units && units in absoluteLengths) {\n          const pxNum = Number(\n            (absoluteLengths[units] * Number(match[1])).toFixed(floatPrecision)\n          );\n\n          if (pxNum.toString().length < match[0].length) {\n            num = pxNum;\n            units = 'px';\n          }\n        }\n\n        // and remove leading zero\n        let str;\n        if (leadingZero) {\n          str = removeLeadingZero(num);\n        } else {\n          str = num.toString();\n        }\n\n        // remove default 'px' units\n        if (defaultPx && units === 'px') {\n          units = '';\n        }\n\n        roundedList.push(str + units);\n      }\n      // if attribute value is \"new\"(only enable-background).\n      else if (matchNew) {\n        roundedList.push('new');\n      } else if (elem) {\n        roundedList.push(elem);\n      }\n    }\n\n    return roundedList.join(' ');\n  };\n\n  return {\n    element: {\n      enter: (node) => {\n        if (node.attributes.points != null) {\n          node.attributes.points = roundValues(node.attributes.points);\n        }\n\n        if (node.attributes['enable-background'] != null) {\n          node.attributes['enable-background'] = roundValues(\n            node.attributes['enable-background']\n          );\n        }\n\n        if (node.attributes.viewBox != null) {\n          node.attributes.viewBox = roundValues(node.attributes.viewBox);\n        }\n\n        if (node.attributes['stroke-dasharray'] != null) {\n          node.attributes['stroke-dasharray'] = roundValues(\n            node.attributes['stroke-dasharray']\n          );\n        }\n\n        if (node.attributes.dx != null) {\n          node.attributes.dx = roundValues(node.attributes.dx);\n        }\n\n        if (node.attributes.dy != null) {\n          node.attributes.dy = roundValues(node.attributes.dy);\n        }\n\n        if (node.attributes.x != null) {\n          node.attributes.x = roundValues(node.attributes.x);\n        }\n\n        if (node.attributes.y != null) {\n          node.attributes.y = roundValues(node.attributes.y);\n        }\n      },\n    },\n  };\n};\n"]},"metadata":{},"sourceType":"script"}