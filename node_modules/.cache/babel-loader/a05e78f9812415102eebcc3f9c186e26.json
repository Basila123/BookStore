{"ast":null,"code":"'use strict';\n\nconst {\n  visit\n} = require('../lib/xast.js');\n\nexports.type = 'visitor';\nexports.name = 'cleanupEnableBackground';\nexports.active = true;\nexports.description = 'remove or cleanup enable-background attribute when possible';\n/**\n * Remove or cleanup enable-background attr which coincides with a width/height box.\n *\n * @see https://www.w3.org/TR/SVG11/filters.html#EnableBackgroundProperty\n *\n * @example\n * <svg width=\"100\" height=\"50\" enable-background=\"new 0 0 100 50\">\n *             ⬇\n * <svg width=\"100\" height=\"50\">\n *\n * @author Kir Belevich\n *\n * @type {import('../lib/types').Plugin<void>}\n */\n\nexports.fn = root => {\n  const regEnableBackground = /^new\\s0\\s0\\s([-+]?\\d*\\.?\\d+([eE][-+]?\\d+)?)\\s([-+]?\\d*\\.?\\d+([eE][-+]?\\d+)?)$/;\n  let hasFilter = false;\n  visit(root, {\n    element: {\n      enter: node => {\n        if (node.name === 'filter') {\n          hasFilter = true;\n        }\n      }\n    }\n  });\n  return {\n    element: {\n      enter: node => {\n        if (node.attributes['enable-background'] == null) {\n          return;\n        }\n\n        if (hasFilter) {\n          if ((node.name === 'svg' || node.name === 'mask' || node.name === 'pattern') && node.attributes.width != null && node.attributes.height != null) {\n            const match = node.attributes['enable-background'].match(regEnableBackground);\n\n            if (match != null && node.attributes.width === match[1] && node.attributes.height === match[3]) {\n              if (node.name === 'svg') {\n                delete node.attributes['enable-background'];\n              } else {\n                node.attributes['enable-background'] = 'new';\n              }\n            }\n          }\n        } else {\n          //we don't need 'enable-background' if we have no filters\n          delete node.attributes['enable-background'];\n        }\n      }\n    }\n  };\n};","map":{"version":3,"sources":["/home/hp/Js/React_practise/BookStore/books/node_modules/postcss-svgo/node_modules/svgo/plugins/cleanupEnableBackground.js"],"names":["visit","require","exports","type","name","active","description","fn","root","regEnableBackground","hasFilter","element","enter","node","attributes","width","height","match"],"mappings":"AAAA;;AAEA,MAAM;AAAEA,EAAAA;AAAF,IAAYC,OAAO,CAAC,gBAAD,CAAzB;;AAEAC,OAAO,CAACC,IAAR,GAAe,SAAf;AACAD,OAAO,CAACE,IAAR,GAAe,yBAAf;AACAF,OAAO,CAACG,MAAR,GAAiB,IAAjB;AACAH,OAAO,CAACI,WAAR,GACE,6DADF;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAJ,OAAO,CAACK,EAAR,GAAcC,IAAD,IAAU;AACrB,QAAMC,mBAAmB,GACvB,+EADF;AAGA,MAAIC,SAAS,GAAG,KAAhB;AACAV,EAAAA,KAAK,CAACQ,IAAD,EAAO;AACVG,IAAAA,OAAO,EAAE;AACPC,MAAAA,KAAK,EAAGC,IAAD,IAAU;AACf,YAAIA,IAAI,CAACT,IAAL,KAAc,QAAlB,EAA4B;AAC1BM,UAAAA,SAAS,GAAG,IAAZ;AACD;AACF;AALM;AADC,GAAP,CAAL;AAUA,SAAO;AACLC,IAAAA,OAAO,EAAE;AACPC,MAAAA,KAAK,EAAGC,IAAD,IAAU;AACf,YAAIA,IAAI,CAACC,UAAL,CAAgB,mBAAhB,KAAwC,IAA5C,EAAkD;AAChD;AACD;;AACD,YAAIJ,SAAJ,EAAe;AACb,cACE,CAACG,IAAI,CAACT,IAAL,KAAc,KAAd,IACCS,IAAI,CAACT,IAAL,KAAc,MADf,IAECS,IAAI,CAACT,IAAL,KAAc,SAFhB,KAGAS,IAAI,CAACC,UAAL,CAAgBC,KAAhB,IAAyB,IAHzB,IAIAF,IAAI,CAACC,UAAL,CAAgBE,MAAhB,IAA0B,IAL5B,EAME;AACA,kBAAMC,KAAK,GACTJ,IAAI,CAACC,UAAL,CAAgB,mBAAhB,EAAqCG,KAArC,CAA2CR,mBAA3C,CADF;;AAEA,gBACEQ,KAAK,IAAI,IAAT,IACAJ,IAAI,CAACC,UAAL,CAAgBC,KAAhB,KAA0BE,KAAK,CAAC,CAAD,CAD/B,IAEAJ,IAAI,CAACC,UAAL,CAAgBE,MAAhB,KAA2BC,KAAK,CAAC,CAAD,CAHlC,EAIE;AACA,kBAAIJ,IAAI,CAACT,IAAL,KAAc,KAAlB,EAAyB;AACvB,uBAAOS,IAAI,CAACC,UAAL,CAAgB,mBAAhB,CAAP;AACD,eAFD,MAEO;AACLD,gBAAAA,IAAI,CAACC,UAAL,CAAgB,mBAAhB,IAAuC,KAAvC;AACD;AACF;AACF;AACF,SAtBD,MAsBO;AACL;AACA,iBAAOD,IAAI,CAACC,UAAL,CAAgB,mBAAhB,CAAP;AACD;AACF;AA/BM;AADJ,GAAP;AAmCD,CAlDD","sourcesContent":["'use strict';\n\nconst { visit } = require('../lib/xast.js');\n\nexports.type = 'visitor';\nexports.name = 'cleanupEnableBackground';\nexports.active = true;\nexports.description =\n  'remove or cleanup enable-background attribute when possible';\n\n/**\n * Remove or cleanup enable-background attr which coincides with a width/height box.\n *\n * @see https://www.w3.org/TR/SVG11/filters.html#EnableBackgroundProperty\n *\n * @example\n * <svg width=\"100\" height=\"50\" enable-background=\"new 0 0 100 50\">\n *             ⬇\n * <svg width=\"100\" height=\"50\">\n *\n * @author Kir Belevich\n *\n * @type {import('../lib/types').Plugin<void>}\n */\nexports.fn = (root) => {\n  const regEnableBackground =\n    /^new\\s0\\s0\\s([-+]?\\d*\\.?\\d+([eE][-+]?\\d+)?)\\s([-+]?\\d*\\.?\\d+([eE][-+]?\\d+)?)$/;\n\n  let hasFilter = false;\n  visit(root, {\n    element: {\n      enter: (node) => {\n        if (node.name === 'filter') {\n          hasFilter = true;\n        }\n      },\n    },\n  });\n\n  return {\n    element: {\n      enter: (node) => {\n        if (node.attributes['enable-background'] == null) {\n          return;\n        }\n        if (hasFilter) {\n          if (\n            (node.name === 'svg' ||\n              node.name === 'mask' ||\n              node.name === 'pattern') &&\n            node.attributes.width != null &&\n            node.attributes.height != null\n          ) {\n            const match =\n              node.attributes['enable-background'].match(regEnableBackground);\n            if (\n              match != null &&\n              node.attributes.width === match[1] &&\n              node.attributes.height === match[3]\n            ) {\n              if (node.name === 'svg') {\n                delete node.attributes['enable-background'];\n              } else {\n                node.attributes['enable-background'] = 'new';\n              }\n            }\n          }\n        } else {\n          //we don't need 'enable-background' if we have no filters\n          delete node.attributes['enable-background'];\n        }\n      },\n    },\n  };\n};\n"]},"metadata":{},"sourceType":"script"}