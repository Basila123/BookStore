{"ast":null,"code":"'use strict';\n\nexports.type = 'visitor';\nexports.name = 'removeUnusedNS';\nexports.active = true;\nexports.description = 'removes unused namespaces declaration';\n/**\n * Remove unused namespaces declaration from svg element\n * which are not used in elements or attributes\n *\n * @author Kir Belevich\n *\n * @type {import('../lib/types').Plugin<void>}\n */\n\nexports.fn = () => {\n  /**\n   * @type {Set<string>}\n   */\n  const unusedNamespaces = new Set();\n  return {\n    element: {\n      enter: (node, parentNode) => {\n        // collect all namespaces from svg element\n        // (such as xmlns:xlink=\"http://www.w3.org/1999/xlink\")\n        if (node.name === 'svg' && parentNode.type === 'root') {\n          for (const name of Object.keys(node.attributes)) {\n            if (name.startsWith('xmlns:')) {\n              const local = name.slice('xmlns:'.length);\n              unusedNamespaces.add(local);\n            }\n          }\n        }\n\n        if (unusedNamespaces.size !== 0) {\n          // preserve namespace used in nested elements names\n          if (node.name.includes(':')) {\n            const [ns] = node.name.split(':');\n\n            if (unusedNamespaces.has(ns)) {\n              unusedNamespaces.delete(ns);\n            }\n          } // preserve namespace used in nested elements attributes\n\n\n          for (const name of Object.keys(node.attributes)) {\n            if (name.includes(':')) {\n              const [ns] = name.split(':');\n              unusedNamespaces.delete(ns);\n            }\n          }\n        }\n      },\n      exit: (node, parentNode) => {\n        // remove unused namespace attributes from svg element\n        if (node.name === 'svg' && parentNode.type === 'root') {\n          for (const name of unusedNamespaces) {\n            delete node.attributes[`xmlns:${name}`];\n          }\n        }\n      }\n    }\n  };\n};","map":{"version":3,"sources":["/home/hp/Js/React_practise/BookStore/books/node_modules/postcss-svgo/node_modules/svgo/plugins/removeUnusedNS.js"],"names":["exports","type","name","active","description","fn","unusedNamespaces","Set","element","enter","node","parentNode","Object","keys","attributes","startsWith","local","slice","length","add","size","includes","ns","split","has","delete","exit"],"mappings":"AAAA;;AAEAA,OAAO,CAACC,IAAR,GAAe,SAAf;AACAD,OAAO,CAACE,IAAR,GAAe,gBAAf;AACAF,OAAO,CAACG,MAAR,GAAiB,IAAjB;AACAH,OAAO,CAACI,WAAR,GAAsB,uCAAtB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAJ,OAAO,CAACK,EAAR,GAAa,MAAM;AACjB;AACF;AACA;AACE,QAAMC,gBAAgB,GAAG,IAAIC,GAAJ,EAAzB;AACA,SAAO;AACLC,IAAAA,OAAO,EAAE;AACPC,MAAAA,KAAK,EAAE,CAACC,IAAD,EAAOC,UAAP,KAAsB;AAC3B;AACA;AACA,YAAID,IAAI,CAACR,IAAL,KAAc,KAAd,IAAuBS,UAAU,CAACV,IAAX,KAAoB,MAA/C,EAAuD;AACrD,eAAK,MAAMC,IAAX,IAAmBU,MAAM,CAACC,IAAP,CAAYH,IAAI,CAACI,UAAjB,CAAnB,EAAiD;AAC/C,gBAAIZ,IAAI,CAACa,UAAL,CAAgB,QAAhB,CAAJ,EAA+B;AAC7B,oBAAMC,KAAK,GAAGd,IAAI,CAACe,KAAL,CAAW,SAASC,MAApB,CAAd;AACAZ,cAAAA,gBAAgB,CAACa,GAAjB,CAAqBH,KAArB;AACD;AACF;AACF;;AACD,YAAIV,gBAAgB,CAACc,IAAjB,KAA0B,CAA9B,EAAiC;AAC/B;AACA,cAAIV,IAAI,CAACR,IAAL,CAAUmB,QAAV,CAAmB,GAAnB,CAAJ,EAA6B;AAC3B,kBAAM,CAACC,EAAD,IAAOZ,IAAI,CAACR,IAAL,CAAUqB,KAAV,CAAgB,GAAhB,CAAb;;AACA,gBAAIjB,gBAAgB,CAACkB,GAAjB,CAAqBF,EAArB,CAAJ,EAA8B;AAC5BhB,cAAAA,gBAAgB,CAACmB,MAAjB,CAAwBH,EAAxB;AACD;AACF,WAP8B,CAQ/B;;;AACA,eAAK,MAAMpB,IAAX,IAAmBU,MAAM,CAACC,IAAP,CAAYH,IAAI,CAACI,UAAjB,CAAnB,EAAiD;AAC/C,gBAAIZ,IAAI,CAACmB,QAAL,CAAc,GAAd,CAAJ,EAAwB;AACtB,oBAAM,CAACC,EAAD,IAAOpB,IAAI,CAACqB,KAAL,CAAW,GAAX,CAAb;AACAjB,cAAAA,gBAAgB,CAACmB,MAAjB,CAAwBH,EAAxB;AACD;AACF;AACF;AACF,OA5BM;AA6BPI,MAAAA,IAAI,EAAE,CAAChB,IAAD,EAAOC,UAAP,KAAsB;AAC1B;AACA,YAAID,IAAI,CAACR,IAAL,KAAc,KAAd,IAAuBS,UAAU,CAACV,IAAX,KAAoB,MAA/C,EAAuD;AACrD,eAAK,MAAMC,IAAX,IAAmBI,gBAAnB,EAAqC;AACnC,mBAAOI,IAAI,CAACI,UAAL,CAAiB,SAAQZ,IAAK,EAA9B,CAAP;AACD;AACF;AACF;AApCM;AADJ,GAAP;AAwCD,CA7CD","sourcesContent":["'use strict';\n\nexports.type = 'visitor';\nexports.name = 'removeUnusedNS';\nexports.active = true;\nexports.description = 'removes unused namespaces declaration';\n\n/**\n * Remove unused namespaces declaration from svg element\n * which are not used in elements or attributes\n *\n * @author Kir Belevich\n *\n * @type {import('../lib/types').Plugin<void>}\n */\nexports.fn = () => {\n  /**\n   * @type {Set<string>}\n   */\n  const unusedNamespaces = new Set();\n  return {\n    element: {\n      enter: (node, parentNode) => {\n        // collect all namespaces from svg element\n        // (such as xmlns:xlink=\"http://www.w3.org/1999/xlink\")\n        if (node.name === 'svg' && parentNode.type === 'root') {\n          for (const name of Object.keys(node.attributes)) {\n            if (name.startsWith('xmlns:')) {\n              const local = name.slice('xmlns:'.length);\n              unusedNamespaces.add(local);\n            }\n          }\n        }\n        if (unusedNamespaces.size !== 0) {\n          // preserve namespace used in nested elements names\n          if (node.name.includes(':')) {\n            const [ns] = node.name.split(':');\n            if (unusedNamespaces.has(ns)) {\n              unusedNamespaces.delete(ns);\n            }\n          }\n          // preserve namespace used in nested elements attributes\n          for (const name of Object.keys(node.attributes)) {\n            if (name.includes(':')) {\n              const [ns] = name.split(':');\n              unusedNamespaces.delete(ns);\n            }\n          }\n        }\n      },\n      exit: (node, parentNode) => {\n        // remove unused namespace attributes from svg element\n        if (node.name === 'svg' && parentNode.type === 'root') {\n          for (const name of unusedNamespaces) {\n            delete node.attributes[`xmlns:${name}`];\n          }\n        }\n      },\n    },\n  };\n};\n"]},"metadata":{},"sourceType":"script"}