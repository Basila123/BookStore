{"ast":null,"code":"\"use strict\";\n\nconst os = require(\"os\");\n\nconst {\n  SourceMapConsumer\n} = require(\"source-map\");\n\nconst {\n  validate\n} = require(\"schema-utils\");\n\nconst serialize = require(\"serialize-javascript\");\n\nconst {\n  Worker\n} = require(\"jest-worker\");\n\nconst {\n  throttleAll,\n  cssnanoMinify,\n  cssoMinify,\n  cleanCssMinify,\n  esbuildMinify,\n  parcelCssMinify\n} = require(\"./utils\");\n\nconst schema = require(\"./options.json\");\n\nconst {\n  minify\n} = require(\"./minify\");\n/** @typedef {import(\"schema-utils/declarations/validate\").Schema} Schema */\n\n/** @typedef {import(\"webpack\").Compiler} Compiler */\n\n/** @typedef {import(\"webpack\").Compilation} Compilation */\n\n/** @typedef {import(\"webpack\").WebpackError} WebpackError */\n\n/** @typedef {import(\"jest-worker\").Worker} JestWorker */\n\n/** @typedef {import(\"source-map\").RawSourceMap} RawSourceMap */\n\n/** @typedef {import(\"webpack\").Asset} Asset */\n\n/** @typedef {import(\"postcss\").ProcessOptions} ProcessOptions */\n\n/** @typedef {import(\"postcss\").Syntax} Syntax */\n\n/** @typedef {import(\"postcss\").Parser} Parser */\n\n/** @typedef {import(\"postcss\").Stringifier} Stringifier */\n\n/**\n * @typedef {Object} CssNanoOptions\n * @property {string} [configFile]\n * @property {[string, object] | string | undefined} [preset]\n */\n\n/** @typedef {Error & { plugin?: string, text?: string, source?: string } | string} Warning */\n\n/**\n * @typedef {Object} WarningObject\n * @property {string} message\n * @property {string} [plugin]\n * @property {string} [text]\n * @property {number} [line]\n * @property {number} [column]\n */\n\n/**\n * @typedef {Object} ErrorObject\n * @property {string} message\n * @property {number} [line]\n * @property {number} [column]\n * @property {string} [stack]\n */\n\n/**\n * @typedef {Object} MinimizedResult\n * @property {string} code\n * @property {RawSourceMap} [map]\n * @property {Array<Error | ErrorObject| string>} [errors]\n * @property {Array<Warning | WarningObject | string>} [warnings]\n */\n\n/**\n * @typedef {{ [file: string]: string }} Input\n */\n\n/**\n * @typedef {{ [key: string]: any }} CustomOptions\n */\n\n/**\n * @template T\n * @typedef {T extends infer U ? U : CustomOptions} InferDefaultType\n */\n\n/**\n * @template T\n * @callback BasicMinimizerImplementation\n * @param {Input} input\n * @param {RawSourceMap | undefined} sourceMap\n * @param {InferDefaultType<T>} minifyOptions\n * @returns {Promise<MinimizedResult>}\n */\n\n/**\n * @template T\n * @typedef {T extends any[] ? { [P in keyof T]: BasicMinimizerImplementation<T[P]>; } : BasicMinimizerImplementation<T>} MinimizerImplementation\n */\n\n/**\n * @template T\n * @typedef {T extends any[] ? { [P in keyof T]?: InferDefaultType<T[P]> } : InferDefaultType<T>} MinimizerOptions\n */\n\n/**\n * @template T\n * @typedef {Object} InternalOptions\n * @property {string} name\n * @property {string} input\n * @property {RawSourceMap | undefined} inputSourceMap\n * @property {{ implementation: MinimizerImplementation<T>, options: MinimizerOptions<T> }} minimizer\n */\n\n/**\n * @typedef InternalResult\n * @property {Array<{ code: string, map: RawSourceMap | undefined }>} outputs\n * @property {Array<Warning | WarningObject | string>} warnings\n * @property {Array<Error | ErrorObject | string>} errors\n */\n\n/** @typedef {undefined | boolean | number} Parallel */\n\n/** @typedef {RegExp | string} Rule */\n\n/** @typedef {Rule[] | Rule} Rules */\n\n/** @typedef {(warning: Warning | WarningObject | string, file: string, source?: string) => boolean} WarningsFilter */\n\n/**\n * @typedef {Object} BasePluginOptions\n * @property {Rules} [test]\n * @property {Rules} [include]\n * @property {Rules} [exclude]\n * @property {WarningsFilter} [warningsFilter]\n * @property {Parallel} [parallel]\n */\n\n/**\n * @template T\n * @typedef {JestWorker & { transform: (options: string) => InternalResult, minify: (options: InternalOptions<T>) => InternalResult }} MinimizerWorker\n */\n\n/**\n * @typedef{ProcessOptions | { from?: string,  to?: string, parser?: string | Syntax | Parser, stringifier?: string | Syntax | Stringifier, syntax?: string | Syntax } } ProcessOptionsExtender\n */\n\n/**\n * @typedef {CssNanoOptions & { processorOptions?: ProcessOptionsExtender }} CssNanoOptionsExtended\n */\n\n/**\n * @template T\n * @typedef {T extends CssNanoOptionsExtended ? { minify?: MinimizerImplementation<T> | undefined, minimizerOptions?: MinimizerOptions<T> | undefined } : { minify: MinimizerImplementation<T>, minimizerOptions?: MinimizerOptions<T> | undefined }} DefinedDefaultMinimizerAndOptions\n */\n\n/**\n * @template T\n * @typedef {BasePluginOptions & { minimizer: { implementation: MinimizerImplementation<T>, options: MinimizerOptions<T> } }} InternalPluginOptions\n */\n\n\nconst warningRegex = /\\s.+:+([0-9]+):+([0-9]+)/;\n/**\n * @template [T=CssNanoOptionsExtended]\n */\n\nclass CssMinimizerPlugin {\n  /**\n   * @param {BasePluginOptions & DefinedDefaultMinimizerAndOptions<T>} [options]\n   */\n  constructor(options) {\n    validate(\n    /** @type {Schema} */\n    schema, options || {}, {\n      name: \"Css Minimizer Plugin\",\n      baseDataPath: \"options\"\n    });\n    const {\n      minify =\n      /** @type {BasicMinimizerImplementation<T>} */\n      cssnanoMinify,\n      minimizerOptions =\n      /** @type {MinimizerOptions<T>} */\n      {},\n      test = /\\.css(\\?.*)?$/i,\n      warningsFilter = () => true,\n      parallel = true,\n      include,\n      exclude\n    } = options || {};\n    /**\n     * @private\n     * @type {InternalPluginOptions<T>}\n     */\n\n    this.options = {\n      test,\n      warningsFilter,\n      parallel,\n      include,\n      exclude,\n      minimizer: {\n        implementation:\n        /** @type {MinimizerImplementation<T>} */\n        minify,\n        options: minimizerOptions\n      }\n    };\n  }\n  /**\n   * @private\n   * @param {any} input\n   * @returns {boolean}\n   */\n\n\n  static isSourceMap(input) {\n    // All required options for `new SourceMapConsumer(...options)`\n    // https://github.com/mozilla/source-map#new-sourcemapconsumerrawsourcemap\n    return Boolean(input && input.version && input.sources && Array.isArray(input.sources) && typeof input.mappings === \"string\");\n  }\n  /**\n   * @private\n   * @param {Warning | WarningObject | string} warning\n   * @param {string} file\n   * @param {WarningsFilter} [warningsFilter]\n   * @param {SourceMapConsumer} [sourceMap]\n   * @param {Compilation[\"requestShortener\"]} [requestShortener]\n   * @returns {Error & { hideStack?: boolean, file?: string } | undefined}\n   */\n\n\n  static buildWarning(warning, file, warningsFilter, sourceMap, requestShortener) {\n    let warningMessage = typeof warning === \"string\" ? warning : `${warning.plugin ? `[${warning.plugin}] ` : \"\"}${warning.text || warning.message}`;\n    let locationMessage = \"\";\n    let source;\n\n    if (sourceMap) {\n      let line;\n      let column;\n\n      if (typeof warning === \"string\") {\n        const match = warningRegex.exec(warning);\n\n        if (match) {\n          line = +match[1];\n          column = +match[2];\n        }\n      } else {\n        ({\n          line,\n          column\n        } =\n        /** @type {WarningObject} */\n        warning);\n      }\n\n      if (line && column) {\n        const original = sourceMap.originalPositionFor({\n          line,\n          column\n        });\n\n        if (original && original.source && original.source !== file && requestShortener) {\n          ({\n            source\n          } = original);\n          warningMessage = `${warningMessage.replace(warningRegex, \"\")}`;\n          locationMessage = `${requestShortener.shorten(original.source)}:${original.line}:${original.column}`;\n        }\n      }\n    }\n\n    if (warningsFilter && !warningsFilter(warning, file, source)) {\n      return;\n    }\n    /**\n     * @type {Error & { hideStack?: boolean, file?: string }}\n     */\n\n\n    const builtWarning = new Error(`${file} from Css Minimizer plugin\\n${warningMessage}${locationMessage ? ` ${locationMessage}` : \"\"}`);\n    builtWarning.name = \"Warning\";\n    builtWarning.hideStack = true;\n    builtWarning.file = file; // eslint-disable-next-line consistent-return\n\n    return builtWarning;\n  }\n  /**\n   * @private\n   * @param {Error | ErrorObject | string} error\n   * @param {string} file\n   * @param {SourceMapConsumer} [sourceMap]\n   * @param {Compilation[\"requestShortener\"]} [requestShortener]\n   * @returns {Error}\n   */\n\n\n  static buildError(error, file, sourceMap, requestShortener) {\n    /**\n     * @type {Error & { file?: string }}\n     */\n    let builtError;\n\n    if (typeof error === \"string\") {\n      builtError = new Error(`${file} from Css Minimizer plugin\\n${error}`);\n      builtError.file = file;\n      return builtError;\n    }\n\n    if (\n    /** @type {ErrorObject} */\n    error.line &&\n    /** @type {ErrorObject} */\n    error.column) {\n      const {\n        line,\n        column\n      } =\n      /** @type {ErrorObject & { line: number, column: number }} */\n      error;\n      const original = sourceMap && sourceMap.originalPositionFor({\n        line,\n        column\n      });\n\n      if (original && original.source && requestShortener) {\n        builtError = new Error(`${file} from Css Minimizer plugin\\n${error.message} [${requestShortener.shorten(original.source)}:${original.line},${original.column}][${file}:${line},${column}]${error.stack ? `\\n${error.stack.split(\"\\n\").slice(1).join(\"\\n\")}` : \"\"}`);\n        builtError.file = file;\n        return builtError;\n      }\n\n      builtError = new Error(`${file} from Css Minimizer plugin\\n${error.message} [${file}:${line},${column}]${error.stack ? `\\n${error.stack.split(\"\\n\").slice(1).join(\"\\n\")}` : \"\"}`);\n      builtError.file = file;\n      return builtError;\n    }\n\n    if (error.stack) {\n      builtError = new Error(`${file} from Css Minimizer plugin\\n${error.stack}`);\n      builtError.file = file;\n      return builtError;\n    }\n\n    builtError = new Error(`${file} from Css Minimizer plugin\\n${error.message}`);\n    builtError.file = file;\n    return builtError;\n  }\n  /**\n   * @private\n   * @param {Parallel} parallel\n   * @returns {number}\n   */\n\n\n  static getAvailableNumberOfCores(parallel) {\n    // In some cases cpus() returns undefined\n    // https://github.com/nodejs/node/issues/19022\n    const cpus = os.cpus() || {\n      length: 1\n    };\n    return parallel === true ? cpus.length - 1 : Math.min(Number(parallel) || 0, cpus.length - 1);\n  }\n  /**\n   * @private\n   * @param {Compiler} compiler\n   * @param {Compilation} compilation\n   * @param {Record<string, import(\"webpack\").sources.Source>} assets\n   * @param {{availableNumberOfCores: number}} optimizeOptions\n   * @returns {Promise<void>}\n   */\n\n\n  async optimize(compiler, compilation, assets, optimizeOptions) {\n    const cache = compilation.getCache(\"CssMinimizerWebpackPlugin\");\n    let numberOfAssetsForMinify = 0;\n    const assetsForMinify = await Promise.all(Object.keys(typeof assets === \"undefined\" ? compilation.assets : assets).filter(name => {\n      const {\n        info\n      } =\n      /** @type {Asset} */\n      compilation.getAsset(name);\n\n      if ( // Skip double minimize assets from child compilation\n      info.minimized) {\n        return false;\n      }\n\n      if (!compiler.webpack.ModuleFilenameHelpers.matchObject.bind( // eslint-disable-next-line no-undefined\n      undefined, this.options)(name)) {\n        return false;\n      }\n\n      return true;\n    }).map(async name => {\n      const {\n        info,\n        source\n      } =\n      /** @type {Asset} */\n      compilation.getAsset(name);\n      const eTag = cache.getLazyHashedEtag(source);\n      const cacheItem = cache.getItemCache(name, eTag);\n      const output = await cacheItem.getPromise();\n\n      if (!output) {\n        numberOfAssetsForMinify += 1;\n      }\n\n      return {\n        name,\n        info,\n        inputSource: source,\n        output,\n        cacheItem\n      };\n    }));\n\n    if (assetsForMinify.length === 0) {\n      return;\n    }\n    /** @type {undefined | (() => MinimizerWorker<T>)} */\n\n\n    let getWorker;\n    /** @type {undefined | MinimizerWorker<T>} */\n\n    let initializedWorker;\n    /** @type {undefined | number} */\n\n    let numberOfWorkers;\n\n    if (optimizeOptions.availableNumberOfCores > 0) {\n      // Do not create unnecessary workers when the number of files is less than the available cores, it saves memory\n      numberOfWorkers = Math.min(numberOfAssetsForMinify, optimizeOptions.availableNumberOfCores);\n\n      getWorker = () => {\n        if (initializedWorker) {\n          return initializedWorker;\n        }\n\n        initializedWorker =\n        /** @type {MinimizerWorker<T>} */\n        new Worker(require.resolve(\"./minify\"), {\n          numWorkers: numberOfWorkers,\n          enableWorkerThreads: true\n        }); // https://github.com/facebook/jest/issues/8872#issuecomment-524822081\n\n        const workerStdout = initializedWorker.getStdout();\n\n        if (workerStdout) {\n          workerStdout.on(\"data\", chunk => process.stdout.write(chunk));\n        }\n\n        const workerStderr = initializedWorker.getStderr();\n\n        if (workerStderr) {\n          workerStderr.on(\"data\", chunk => process.stderr.write(chunk));\n        }\n\n        return initializedWorker;\n      };\n    }\n\n    const {\n      SourceMapSource,\n      RawSource\n    } = compiler.webpack.sources;\n    const scheduledTasks = [];\n\n    for (const asset of assetsForMinify) {\n      scheduledTasks.push(async () => {\n        const {\n          name,\n          inputSource,\n          cacheItem\n        } = asset;\n        let {\n          output\n        } = asset;\n\n        if (!output) {\n          let input;\n          /** @type {RawSourceMap | undefined} */\n\n          let inputSourceMap;\n          const {\n            source: sourceFromInputSource,\n            map\n          } = inputSource.sourceAndMap();\n          input = sourceFromInputSource;\n\n          if (map) {\n            if (!CssMinimizerPlugin.isSourceMap(map)) {\n              compilation.warnings.push(\n              /** @type {WebpackError} */\n              new Error(`${name} contains invalid source map`));\n            } else {\n              inputSourceMap =\n              /** @type {RawSourceMap} */\n              map;\n            }\n          }\n\n          if (Buffer.isBuffer(input)) {\n            input = input.toString();\n          }\n          /**\n           * @type {InternalOptions<T>}\n           */\n\n\n          const options = {\n            name,\n            input,\n            inputSourceMap,\n            minimizer: {\n              implementation: this.options.minimizer.implementation,\n              options: this.options.minimizer.options\n            }\n          };\n          let result;\n\n          try {\n            result = await (getWorker ? getWorker().transform(serialize(options)) : minify(options));\n          } catch (error) {\n            const hasSourceMap = inputSourceMap && CssMinimizerPlugin.isSourceMap(inputSourceMap);\n            compilation.errors.push(\n            /** @type {WebpackError} */\n            CssMinimizerPlugin.buildError(\n            /** @type {any} */\n            error, name, hasSourceMap ? new SourceMapConsumer(\n            /** @type {RawSourceMap} */\n            inputSourceMap) : // eslint-disable-next-line no-undefined\n            undefined, // eslint-disable-next-line no-undefined\n            hasSourceMap ? compilation.requestShortener : undefined));\n            return;\n          }\n\n          output = {\n            warnings: [],\n            errors: []\n          };\n\n          for (const item of result.outputs) {\n            if (item.map) {\n              let originalSource;\n              let innerSourceMap;\n\n              if (output.source) {\n                ({\n                  source: originalSource,\n                  map: innerSourceMap\n                } = output.source.sourceAndMap());\n              } else {\n                originalSource = input;\n                innerSourceMap = inputSourceMap;\n              } // TODO need API for merging source maps in `webpack-source`\n\n\n              output.source = new SourceMapSource(item.code, name, item.map, originalSource, innerSourceMap, true);\n            } else {\n              output.source = new RawSource(item.code);\n            }\n          }\n\n          if (result.errors && result.errors.length > 0) {\n            const hasSourceMap = inputSourceMap && CssMinimizerPlugin.isSourceMap(inputSourceMap);\n\n            for (const error of result.errors) {\n              output.warnings.push(CssMinimizerPlugin.buildError(error, name, hasSourceMap ? new SourceMapConsumer(\n              /** @type {RawSourceMap} */\n              inputSourceMap) : // eslint-disable-next-line no-undefined\n              undefined, // eslint-disable-next-line no-undefined\n              hasSourceMap ? compilation.requestShortener : undefined));\n            }\n          }\n\n          if (result.warnings && result.warnings.length > 0) {\n            const hasSourceMap = inputSourceMap && CssMinimizerPlugin.isSourceMap(inputSourceMap);\n\n            for (const warning of result.warnings) {\n              const buildWarning = CssMinimizerPlugin.buildWarning(warning, name, this.options.warningsFilter, hasSourceMap ? new SourceMapConsumer(\n              /** @type {RawSourceMap} */\n              inputSourceMap) : // eslint-disable-next-line no-undefined\n              undefined, // eslint-disable-next-line no-undefined\n              hasSourceMap ? compilation.requestShortener : undefined);\n\n              if (buildWarning) {\n                output.warnings.push(buildWarning);\n              }\n            }\n          }\n\n          await cacheItem.storePromise({\n            source: output.source,\n            warnings: output.warnings,\n            errors: output.errors\n          });\n        }\n\n        if (output.warnings && output.warnings.length > 0) {\n          for (const warning of output.warnings) {\n            compilation.warnings.push(warning);\n          }\n        }\n\n        if (output.errors && output.errors.length > 0) {\n          for (const error of output.errors) {\n            compilation.errors.push(error);\n          }\n        }\n\n        const newInfo = {\n          minimized: true\n        };\n        const {\n          source\n        } = output;\n        compilation.updateAsset(name, source, newInfo);\n      });\n    }\n\n    const limit = getWorker && numberOfAssetsForMinify > 0 ?\n    /** @type {number} */\n    numberOfWorkers : scheduledTasks.length;\n    await throttleAll(limit, scheduledTasks);\n\n    if (initializedWorker) {\n      await initializedWorker.end();\n    }\n  }\n  /**\n   * @param {Compiler} compiler\n   * @returns {void}\n   */\n\n\n  apply(compiler) {\n    const pluginName = this.constructor.name;\n    const availableNumberOfCores = CssMinimizerPlugin.getAvailableNumberOfCores(this.options.parallel);\n    compiler.hooks.compilation.tap(pluginName, compilation => {\n      compilation.hooks.processAssets.tapPromise({\n        name: pluginName,\n        stage: compiler.webpack.Compilation.PROCESS_ASSETS_STAGE_OPTIMIZE_SIZE,\n        additionalAssets: true\n      }, assets => this.optimize(compiler, compilation, assets, {\n        availableNumberOfCores\n      }));\n      compilation.hooks.statsPrinter.tap(pluginName, stats => {\n        stats.hooks.print.for(\"asset.info.minimized\").tap(\"css-minimizer-webpack-plugin\", (minimized, _ref) => {\n          let {\n            green,\n            formatFlag\n          } = _ref;\n          return (// eslint-disable-next-line no-undefined\n            minimized ?\n            /** @type {Function} */\n            green(\n            /** @type {Function} */\n            formatFlag(\"minimized\")) : \"\"\n          );\n        });\n      });\n    });\n  }\n\n}\n\nCssMinimizerPlugin.cssnanoMinify = cssnanoMinify;\nCssMinimizerPlugin.cssoMinify = cssoMinify;\nCssMinimizerPlugin.cleanCssMinify = cleanCssMinify;\nCssMinimizerPlugin.esbuildMinify = esbuildMinify;\nCssMinimizerPlugin.parcelCssMinify = parcelCssMinify;\nmodule.exports = CssMinimizerPlugin;","map":{"version":3,"sources":["/home/hp/Js/React_practise/BookStore/books/node_modules/css-minimizer-webpack-plugin/dist/index.js"],"names":["os","require","SourceMapConsumer","validate","serialize","Worker","throttleAll","cssnanoMinify","cssoMinify","cleanCssMinify","esbuildMinify","parcelCssMinify","schema","minify","warningRegex","CssMinimizerPlugin","constructor","options","name","baseDataPath","minimizerOptions","test","warningsFilter","parallel","include","exclude","minimizer","implementation","isSourceMap","input","Boolean","version","sources","Array","isArray","mappings","buildWarning","warning","file","sourceMap","requestShortener","warningMessage","plugin","text","message","locationMessage","source","line","column","match","exec","original","originalPositionFor","replace","shorten","builtWarning","Error","hideStack","buildError","error","builtError","stack","split","slice","join","getAvailableNumberOfCores","cpus","length","Math","min","Number","optimize","compiler","compilation","assets","optimizeOptions","cache","getCache","numberOfAssetsForMinify","assetsForMinify","Promise","all","Object","keys","filter","info","getAsset","minimized","webpack","ModuleFilenameHelpers","matchObject","bind","undefined","map","eTag","getLazyHashedEtag","cacheItem","getItemCache","output","getPromise","inputSource","getWorker","initializedWorker","numberOfWorkers","availableNumberOfCores","resolve","numWorkers","enableWorkerThreads","workerStdout","getStdout","on","chunk","process","stdout","write","workerStderr","getStderr","stderr","SourceMapSource","RawSource","scheduledTasks","asset","push","inputSourceMap","sourceFromInputSource","sourceAndMap","warnings","Buffer","isBuffer","toString","result","transform","hasSourceMap","errors","item","outputs","originalSource","innerSourceMap","code","storePromise","newInfo","updateAsset","limit","end","apply","pluginName","hooks","tap","processAssets","tapPromise","stage","Compilation","PROCESS_ASSETS_STAGE_OPTIMIZE_SIZE","additionalAssets","statsPrinter","stats","print","for","green","formatFlag","module","exports"],"mappings":"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","sourcesContent":["\"use strict\";\n\nconst os = require(\"os\");\n\nconst {\n  SourceMapConsumer\n} = require(\"source-map\");\n\nconst {\n  validate\n} = require(\"schema-utils\");\n\nconst serialize = require(\"serialize-javascript\");\n\nconst {\n  Worker\n} = require(\"jest-worker\");\n\nconst {\n  throttleAll,\n  cssnanoMinify,\n  cssoMinify,\n  cleanCssMinify,\n  esbuildMinify,\n  parcelCssMinify\n} = require(\"./utils\");\n\nconst schema = require(\"./options.json\");\n\nconst {\n  minify\n} = require(\"./minify\");\n/** @typedef {import(\"schema-utils/declarations/validate\").Schema} Schema */\n\n/** @typedef {import(\"webpack\").Compiler} Compiler */\n\n/** @typedef {import(\"webpack\").Compilation} Compilation */\n\n/** @typedef {import(\"webpack\").WebpackError} WebpackError */\n\n/** @typedef {import(\"jest-worker\").Worker} JestWorker */\n\n/** @typedef {import(\"source-map\").RawSourceMap} RawSourceMap */\n\n/** @typedef {import(\"webpack\").Asset} Asset */\n\n/** @typedef {import(\"postcss\").ProcessOptions} ProcessOptions */\n\n/** @typedef {import(\"postcss\").Syntax} Syntax */\n\n/** @typedef {import(\"postcss\").Parser} Parser */\n\n/** @typedef {import(\"postcss\").Stringifier} Stringifier */\n\n/**\n * @typedef {Object} CssNanoOptions\n * @property {string} [configFile]\n * @property {[string, object] | string | undefined} [preset]\n */\n\n/** @typedef {Error & { plugin?: string, text?: string, source?: string } | string} Warning */\n\n/**\n * @typedef {Object} WarningObject\n * @property {string} message\n * @property {string} [plugin]\n * @property {string} [text]\n * @property {number} [line]\n * @property {number} [column]\n */\n\n/**\n * @typedef {Object} ErrorObject\n * @property {string} message\n * @property {number} [line]\n * @property {number} [column]\n * @property {string} [stack]\n */\n\n/**\n * @typedef {Object} MinimizedResult\n * @property {string} code\n * @property {RawSourceMap} [map]\n * @property {Array<Error | ErrorObject| string>} [errors]\n * @property {Array<Warning | WarningObject | string>} [warnings]\n */\n\n/**\n * @typedef {{ [file: string]: string }} Input\n */\n\n/**\n * @typedef {{ [key: string]: any }} CustomOptions\n */\n\n/**\n * @template T\n * @typedef {T extends infer U ? U : CustomOptions} InferDefaultType\n */\n\n/**\n * @template T\n * @callback BasicMinimizerImplementation\n * @param {Input} input\n * @param {RawSourceMap | undefined} sourceMap\n * @param {InferDefaultType<T>} minifyOptions\n * @returns {Promise<MinimizedResult>}\n */\n\n/**\n * @template T\n * @typedef {T extends any[] ? { [P in keyof T]: BasicMinimizerImplementation<T[P]>; } : BasicMinimizerImplementation<T>} MinimizerImplementation\n */\n\n/**\n * @template T\n * @typedef {T extends any[] ? { [P in keyof T]?: InferDefaultType<T[P]> } : InferDefaultType<T>} MinimizerOptions\n */\n\n/**\n * @template T\n * @typedef {Object} InternalOptions\n * @property {string} name\n * @property {string} input\n * @property {RawSourceMap | undefined} inputSourceMap\n * @property {{ implementation: MinimizerImplementation<T>, options: MinimizerOptions<T> }} minimizer\n */\n\n/**\n * @typedef InternalResult\n * @property {Array<{ code: string, map: RawSourceMap | undefined }>} outputs\n * @property {Array<Warning | WarningObject | string>} warnings\n * @property {Array<Error | ErrorObject | string>} errors\n */\n\n/** @typedef {undefined | boolean | number} Parallel */\n\n/** @typedef {RegExp | string} Rule */\n\n/** @typedef {Rule[] | Rule} Rules */\n\n/** @typedef {(warning: Warning | WarningObject | string, file: string, source?: string) => boolean} WarningsFilter */\n\n/**\n * @typedef {Object} BasePluginOptions\n * @property {Rules} [test]\n * @property {Rules} [include]\n * @property {Rules} [exclude]\n * @property {WarningsFilter} [warningsFilter]\n * @property {Parallel} [parallel]\n */\n\n/**\n * @template T\n * @typedef {JestWorker & { transform: (options: string) => InternalResult, minify: (options: InternalOptions<T>) => InternalResult }} MinimizerWorker\n */\n\n/**\n * @typedef{ProcessOptions | { from?: string,  to?: string, parser?: string | Syntax | Parser, stringifier?: string | Syntax | Stringifier, syntax?: string | Syntax } } ProcessOptionsExtender\n */\n\n/**\n * @typedef {CssNanoOptions & { processorOptions?: ProcessOptionsExtender }} CssNanoOptionsExtended\n */\n\n/**\n * @template T\n * @typedef {T extends CssNanoOptionsExtended ? { minify?: MinimizerImplementation<T> | undefined, minimizerOptions?: MinimizerOptions<T> | undefined } : { minify: MinimizerImplementation<T>, minimizerOptions?: MinimizerOptions<T> | undefined }} DefinedDefaultMinimizerAndOptions\n */\n\n/**\n * @template T\n * @typedef {BasePluginOptions & { minimizer: { implementation: MinimizerImplementation<T>, options: MinimizerOptions<T> } }} InternalPluginOptions\n */\n\n\nconst warningRegex = /\\s.+:+([0-9]+):+([0-9]+)/;\n/**\n * @template [T=CssNanoOptionsExtended]\n */\n\nclass CssMinimizerPlugin {\n  /**\n   * @param {BasePluginOptions & DefinedDefaultMinimizerAndOptions<T>} [options]\n   */\n  constructor(options) {\n    validate(\n    /** @type {Schema} */\n    schema, options || {}, {\n      name: \"Css Minimizer Plugin\",\n      baseDataPath: \"options\"\n    });\n    const {\n      minify =\n      /** @type {BasicMinimizerImplementation<T>} */\n      cssnanoMinify,\n      minimizerOptions =\n      /** @type {MinimizerOptions<T>} */\n      {},\n      test = /\\.css(\\?.*)?$/i,\n      warningsFilter = () => true,\n      parallel = true,\n      include,\n      exclude\n    } = options || {};\n    /**\n     * @private\n     * @type {InternalPluginOptions<T>}\n     */\n\n    this.options = {\n      test,\n      warningsFilter,\n      parallel,\n      include,\n      exclude,\n      minimizer: {\n        implementation:\n        /** @type {MinimizerImplementation<T>} */\n        minify,\n        options: minimizerOptions\n      }\n    };\n  }\n  /**\n   * @private\n   * @param {any} input\n   * @returns {boolean}\n   */\n\n\n  static isSourceMap(input) {\n    // All required options for `new SourceMapConsumer(...options)`\n    // https://github.com/mozilla/source-map#new-sourcemapconsumerrawsourcemap\n    return Boolean(input && input.version && input.sources && Array.isArray(input.sources) && typeof input.mappings === \"string\");\n  }\n  /**\n   * @private\n   * @param {Warning | WarningObject | string} warning\n   * @param {string} file\n   * @param {WarningsFilter} [warningsFilter]\n   * @param {SourceMapConsumer} [sourceMap]\n   * @param {Compilation[\"requestShortener\"]} [requestShortener]\n   * @returns {Error & { hideStack?: boolean, file?: string } | undefined}\n   */\n\n\n  static buildWarning(warning, file, warningsFilter, sourceMap, requestShortener) {\n    let warningMessage = typeof warning === \"string\" ? warning : `${warning.plugin ? `[${warning.plugin}] ` : \"\"}${warning.text || warning.message}`;\n    let locationMessage = \"\";\n    let source;\n\n    if (sourceMap) {\n      let line;\n      let column;\n\n      if (typeof warning === \"string\") {\n        const match = warningRegex.exec(warning);\n\n        if (match) {\n          line = +match[1];\n          column = +match[2];\n        }\n      } else {\n        ({\n          line,\n          column\n        } =\n        /** @type {WarningObject} */\n        warning);\n      }\n\n      if (line && column) {\n        const original = sourceMap.originalPositionFor({\n          line,\n          column\n        });\n\n        if (original && original.source && original.source !== file && requestShortener) {\n          ({\n            source\n          } = original);\n          warningMessage = `${warningMessage.replace(warningRegex, \"\")}`;\n          locationMessage = `${requestShortener.shorten(original.source)}:${original.line}:${original.column}`;\n        }\n      }\n    }\n\n    if (warningsFilter && !warningsFilter(warning, file, source)) {\n      return;\n    }\n    /**\n     * @type {Error & { hideStack?: boolean, file?: string }}\n     */\n\n\n    const builtWarning = new Error(`${file} from Css Minimizer plugin\\n${warningMessage}${locationMessage ? ` ${locationMessage}` : \"\"}`);\n    builtWarning.name = \"Warning\";\n    builtWarning.hideStack = true;\n    builtWarning.file = file; // eslint-disable-next-line consistent-return\n\n    return builtWarning;\n  }\n  /**\n   * @private\n   * @param {Error | ErrorObject | string} error\n   * @param {string} file\n   * @param {SourceMapConsumer} [sourceMap]\n   * @param {Compilation[\"requestShortener\"]} [requestShortener]\n   * @returns {Error}\n   */\n\n\n  static buildError(error, file, sourceMap, requestShortener) {\n    /**\n     * @type {Error & { file?: string }}\n     */\n    let builtError;\n\n    if (typeof error === \"string\") {\n      builtError = new Error(`${file} from Css Minimizer plugin\\n${error}`);\n      builtError.file = file;\n      return builtError;\n    }\n\n    if (\n    /** @type {ErrorObject} */\n    error.line &&\n    /** @type {ErrorObject} */\n    error.column) {\n      const {\n        line,\n        column\n      } =\n      /** @type {ErrorObject & { line: number, column: number }} */\n      error;\n      const original = sourceMap && sourceMap.originalPositionFor({\n        line,\n        column\n      });\n\n      if (original && original.source && requestShortener) {\n        builtError = new Error(`${file} from Css Minimizer plugin\\n${error.message} [${requestShortener.shorten(original.source)}:${original.line},${original.column}][${file}:${line},${column}]${error.stack ? `\\n${error.stack.split(\"\\n\").slice(1).join(\"\\n\")}` : \"\"}`);\n        builtError.file = file;\n        return builtError;\n      }\n\n      builtError = new Error(`${file} from Css Minimizer plugin\\n${error.message} [${file}:${line},${column}]${error.stack ? `\\n${error.stack.split(\"\\n\").slice(1).join(\"\\n\")}` : \"\"}`);\n      builtError.file = file;\n      return builtError;\n    }\n\n    if (error.stack) {\n      builtError = new Error(`${file} from Css Minimizer plugin\\n${error.stack}`);\n      builtError.file = file;\n      return builtError;\n    }\n\n    builtError = new Error(`${file} from Css Minimizer plugin\\n${error.message}`);\n    builtError.file = file;\n    return builtError;\n  }\n  /**\n   * @private\n   * @param {Parallel} parallel\n   * @returns {number}\n   */\n\n\n  static getAvailableNumberOfCores(parallel) {\n    // In some cases cpus() returns undefined\n    // https://github.com/nodejs/node/issues/19022\n    const cpus = os.cpus() || {\n      length: 1\n    };\n    return parallel === true ? cpus.length - 1 : Math.min(Number(parallel) || 0, cpus.length - 1);\n  }\n  /**\n   * @private\n   * @param {Compiler} compiler\n   * @param {Compilation} compilation\n   * @param {Record<string, import(\"webpack\").sources.Source>} assets\n   * @param {{availableNumberOfCores: number}} optimizeOptions\n   * @returns {Promise<void>}\n   */\n\n\n  async optimize(compiler, compilation, assets, optimizeOptions) {\n    const cache = compilation.getCache(\"CssMinimizerWebpackPlugin\");\n    let numberOfAssetsForMinify = 0;\n    const assetsForMinify = await Promise.all(Object.keys(typeof assets === \"undefined\" ? compilation.assets : assets).filter(name => {\n      const {\n        info\n      } =\n      /** @type {Asset} */\n      compilation.getAsset(name);\n\n      if ( // Skip double minimize assets from child compilation\n      info.minimized) {\n        return false;\n      }\n\n      if (!compiler.webpack.ModuleFilenameHelpers.matchObject.bind( // eslint-disable-next-line no-undefined\n      undefined, this.options)(name)) {\n        return false;\n      }\n\n      return true;\n    }).map(async name => {\n      const {\n        info,\n        source\n      } =\n      /** @type {Asset} */\n      compilation.getAsset(name);\n      const eTag = cache.getLazyHashedEtag(source);\n      const cacheItem = cache.getItemCache(name, eTag);\n      const output = await cacheItem.getPromise();\n\n      if (!output) {\n        numberOfAssetsForMinify += 1;\n      }\n\n      return {\n        name,\n        info,\n        inputSource: source,\n        output,\n        cacheItem\n      };\n    }));\n\n    if (assetsForMinify.length === 0) {\n      return;\n    }\n    /** @type {undefined | (() => MinimizerWorker<T>)} */\n\n\n    let getWorker;\n    /** @type {undefined | MinimizerWorker<T>} */\n\n    let initializedWorker;\n    /** @type {undefined | number} */\n\n    let numberOfWorkers;\n\n    if (optimizeOptions.availableNumberOfCores > 0) {\n      // Do not create unnecessary workers when the number of files is less than the available cores, it saves memory\n      numberOfWorkers = Math.min(numberOfAssetsForMinify, optimizeOptions.availableNumberOfCores);\n\n      getWorker = () => {\n        if (initializedWorker) {\n          return initializedWorker;\n        }\n\n        initializedWorker =\n        /** @type {MinimizerWorker<T>} */\n        new Worker(require.resolve(\"./minify\"), {\n          numWorkers: numberOfWorkers,\n          enableWorkerThreads: true\n        }); // https://github.com/facebook/jest/issues/8872#issuecomment-524822081\n\n        const workerStdout = initializedWorker.getStdout();\n\n        if (workerStdout) {\n          workerStdout.on(\"data\", chunk => process.stdout.write(chunk));\n        }\n\n        const workerStderr = initializedWorker.getStderr();\n\n        if (workerStderr) {\n          workerStderr.on(\"data\", chunk => process.stderr.write(chunk));\n        }\n\n        return initializedWorker;\n      };\n    }\n\n    const {\n      SourceMapSource,\n      RawSource\n    } = compiler.webpack.sources;\n    const scheduledTasks = [];\n\n    for (const asset of assetsForMinify) {\n      scheduledTasks.push(async () => {\n        const {\n          name,\n          inputSource,\n          cacheItem\n        } = asset;\n        let {\n          output\n        } = asset;\n\n        if (!output) {\n          let input;\n          /** @type {RawSourceMap | undefined} */\n\n          let inputSourceMap;\n          const {\n            source: sourceFromInputSource,\n            map\n          } = inputSource.sourceAndMap();\n          input = sourceFromInputSource;\n\n          if (map) {\n            if (!CssMinimizerPlugin.isSourceMap(map)) {\n              compilation.warnings.push(\n              /** @type {WebpackError} */\n              new Error(`${name} contains invalid source map`));\n            } else {\n              inputSourceMap =\n              /** @type {RawSourceMap} */\n              map;\n            }\n          }\n\n          if (Buffer.isBuffer(input)) {\n            input = input.toString();\n          }\n          /**\n           * @type {InternalOptions<T>}\n           */\n\n\n          const options = {\n            name,\n            input,\n            inputSourceMap,\n            minimizer: {\n              implementation: this.options.minimizer.implementation,\n              options: this.options.minimizer.options\n            }\n          };\n          let result;\n\n          try {\n            result = await (getWorker ? getWorker().transform(serialize(options)) : minify(options));\n          } catch (error) {\n            const hasSourceMap = inputSourceMap && CssMinimizerPlugin.isSourceMap(inputSourceMap);\n            compilation.errors.push(\n            /** @type {WebpackError} */\n            CssMinimizerPlugin.buildError(\n            /** @type {any} */\n            error, name, hasSourceMap ? new SourceMapConsumer(\n            /** @type {RawSourceMap} */\n            inputSourceMap) : // eslint-disable-next-line no-undefined\n            undefined, // eslint-disable-next-line no-undefined\n            hasSourceMap ? compilation.requestShortener : undefined));\n            return;\n          }\n\n          output = {\n            warnings: [],\n            errors: []\n          };\n\n          for (const item of result.outputs) {\n            if (item.map) {\n              let originalSource;\n              let innerSourceMap;\n\n              if (output.source) {\n                ({\n                  source: originalSource,\n                  map: innerSourceMap\n                } = output.source.sourceAndMap());\n              } else {\n                originalSource = input;\n                innerSourceMap = inputSourceMap;\n              } // TODO need API for merging source maps in `webpack-source`\n\n\n              output.source = new SourceMapSource(item.code, name, item.map, originalSource, innerSourceMap, true);\n            } else {\n              output.source = new RawSource(item.code);\n            }\n          }\n\n          if (result.errors && result.errors.length > 0) {\n            const hasSourceMap = inputSourceMap && CssMinimizerPlugin.isSourceMap(inputSourceMap);\n\n            for (const error of result.errors) {\n              output.warnings.push(CssMinimizerPlugin.buildError(error, name, hasSourceMap ? new SourceMapConsumer(\n              /** @type {RawSourceMap} */\n              inputSourceMap) : // eslint-disable-next-line no-undefined\n              undefined, // eslint-disable-next-line no-undefined\n              hasSourceMap ? compilation.requestShortener : undefined));\n            }\n          }\n\n          if (result.warnings && result.warnings.length > 0) {\n            const hasSourceMap = inputSourceMap && CssMinimizerPlugin.isSourceMap(inputSourceMap);\n\n            for (const warning of result.warnings) {\n              const buildWarning = CssMinimizerPlugin.buildWarning(warning, name, this.options.warningsFilter, hasSourceMap ? new SourceMapConsumer(\n              /** @type {RawSourceMap} */\n              inputSourceMap) : // eslint-disable-next-line no-undefined\n              undefined, // eslint-disable-next-line no-undefined\n              hasSourceMap ? compilation.requestShortener : undefined);\n\n              if (buildWarning) {\n                output.warnings.push(buildWarning);\n              }\n            }\n          }\n\n          await cacheItem.storePromise({\n            source: output.source,\n            warnings: output.warnings,\n            errors: output.errors\n          });\n        }\n\n        if (output.warnings && output.warnings.length > 0) {\n          for (const warning of output.warnings) {\n            compilation.warnings.push(warning);\n          }\n        }\n\n        if (output.errors && output.errors.length > 0) {\n          for (const error of output.errors) {\n            compilation.errors.push(error);\n          }\n        }\n\n        const newInfo = {\n          minimized: true\n        };\n        const {\n          source\n        } = output;\n        compilation.updateAsset(name, source, newInfo);\n      });\n    }\n\n    const limit = getWorker && numberOfAssetsForMinify > 0 ?\n    /** @type {number} */\n    numberOfWorkers : scheduledTasks.length;\n    await throttleAll(limit, scheduledTasks);\n\n    if (initializedWorker) {\n      await initializedWorker.end();\n    }\n  }\n  /**\n   * @param {Compiler} compiler\n   * @returns {void}\n   */\n\n\n  apply(compiler) {\n    const pluginName = this.constructor.name;\n    const availableNumberOfCores = CssMinimizerPlugin.getAvailableNumberOfCores(this.options.parallel);\n    compiler.hooks.compilation.tap(pluginName, compilation => {\n      compilation.hooks.processAssets.tapPromise({\n        name: pluginName,\n        stage: compiler.webpack.Compilation.PROCESS_ASSETS_STAGE_OPTIMIZE_SIZE,\n        additionalAssets: true\n      }, assets => this.optimize(compiler, compilation, assets, {\n        availableNumberOfCores\n      }));\n      compilation.hooks.statsPrinter.tap(pluginName, stats => {\n        stats.hooks.print.for(\"asset.info.minimized\").tap(\"css-minimizer-webpack-plugin\", (minimized, {\n          green,\n          formatFlag\n        }) => // eslint-disable-next-line no-undefined\n        minimized ?\n        /** @type {Function} */\n        green(\n        /** @type {Function} */\n        formatFlag(\"minimized\")) : \"\");\n      });\n    });\n  }\n\n}\n\nCssMinimizerPlugin.cssnanoMinify = cssnanoMinify;\nCssMinimizerPlugin.cssoMinify = cssoMinify;\nCssMinimizerPlugin.cleanCssMinify = cleanCssMinify;\nCssMinimizerPlugin.esbuildMinify = esbuildMinify;\nCssMinimizerPlugin.parcelCssMinify = parcelCssMinify;\nmodule.exports = CssMinimizerPlugin;"]},"metadata":{},"sourceType":"script"}