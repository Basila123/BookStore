{"ast":null,"code":"'use strict';\n/**\n * @typedef {import('./types').XastParent} XastParent\n * @typedef {import('./types').XastRoot} XastRoot\n * @typedef {import('./types').XastElement} XastElement\n * @typedef {import('./types').XastInstruction} XastInstruction\n * @typedef {import('./types').XastDoctype} XastDoctype\n * @typedef {import('./types').XastText} XastText\n * @typedef {import('./types').XastCdata} XastCdata\n * @typedef {import('./types').XastComment} XastComment\n * @typedef {import('./types').StringifyOptions} StringifyOptions\n */\n\nconst {\n  textElems\n} = require('../plugins/_collections.js');\n/**\n * @typedef {{\n *   width: void | string,\n *   height: void | string,\n *   indent: string,\n *   textContext: null | XastElement,\n *   indentLevel: number,\n * }} State\n */\n\n/**\n * @typedef {Required<StringifyOptions>} Options\n */\n\n/**\n * @type {(char: string) => string}\n */\n\n\nconst encodeEntity = char => {\n  return entities[char];\n};\n/**\n * @type {Options}\n */\n\n\nconst defaults = {\n  doctypeStart: '<!DOCTYPE',\n  doctypeEnd: '>',\n  procInstStart: '<?',\n  procInstEnd: '?>',\n  tagOpenStart: '<',\n  tagOpenEnd: '>',\n  tagCloseStart: '</',\n  tagCloseEnd: '>',\n  tagShortStart: '<',\n  tagShortEnd: '/>',\n  attrStart: '=\"',\n  attrEnd: '\"',\n  commentStart: '<!--',\n  commentEnd: '-->',\n  cdataStart: '<![CDATA[',\n  cdataEnd: ']]>',\n  textStart: '',\n  textEnd: '',\n  indent: 4,\n  regEntities: /[&'\"<>]/g,\n  regValEntities: /[&\"<>]/g,\n  encodeEntity: encodeEntity,\n  pretty: false,\n  useShortTags: true,\n  eol: 'lf',\n  finalNewline: false\n};\n/**\n * @type {Record<string, string>}\n */\n\nconst entities = {\n  '&': '&amp;',\n  \"'\": '&apos;',\n  '\"': '&quot;',\n  '>': '&gt;',\n  '<': '&lt;'\n};\n/**\n * convert XAST to SVG string\n *\n * @type {(data: XastRoot, config: StringifyOptions) => {\n *   data: string,\n *   info: {\n *     width: void | string,\n *     height: void | string\n *   }\n * }}\n */\n\nconst stringifySvg = function (data) {\n  let userOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  /**\n   * @type {Options}\n   */\n  const config = { ...defaults,\n    ...userOptions\n  };\n  const indent = config.indent;\n  let newIndent = '    ';\n\n  if (typeof indent === 'number' && Number.isNaN(indent) === false) {\n    newIndent = indent < 0 ? '\\t' : ' '.repeat(indent);\n  } else if (typeof indent === 'string') {\n    newIndent = indent;\n  }\n  /**\n   * @type {State}\n   */\n\n\n  const state = {\n    // TODO remove width and height in v3\n    width: undefined,\n    height: undefined,\n    indent: newIndent,\n    textContext: null,\n    indentLevel: 0\n  };\n  const eol = config.eol === 'crlf' ? '\\r\\n' : '\\n';\n\n  if (config.pretty) {\n    config.doctypeEnd += eol;\n    config.procInstEnd += eol;\n    config.commentEnd += eol;\n    config.cdataEnd += eol;\n    config.tagShortEnd += eol;\n    config.tagOpenEnd += eol;\n    config.tagCloseEnd += eol;\n    config.textEnd += eol;\n  }\n\n  let svg = stringifyNode(data, config, state);\n\n  if (config.finalNewline && svg.length > 0 && svg[svg.length - 1] !== '\\n') {\n    svg += eol;\n  }\n\n  return {\n    data: svg,\n    info: {\n      width: state.width,\n      height: state.height\n    }\n  };\n};\n\nexports.stringifySvg = stringifySvg;\n/**\n * @type {(node: XastParent, config: Options, state: State) => string}\n */\n\nconst stringifyNode = (data, config, state) => {\n  let svg = '';\n  state.indentLevel += 1;\n\n  for (const item of data.children) {\n    if (item.type === 'element') {\n      svg += stringifyElement(item, config, state);\n    }\n\n    if (item.type === 'text') {\n      svg += stringifyText(item, config, state);\n    }\n\n    if (item.type === 'doctype') {\n      svg += stringifyDoctype(item, config);\n    }\n\n    if (item.type === 'instruction') {\n      svg += stringifyInstruction(item, config);\n    }\n\n    if (item.type === 'comment') {\n      svg += stringifyComment(item, config);\n    }\n\n    if (item.type === 'cdata') {\n      svg += stringifyCdata(item, config, state);\n    }\n  }\n\n  state.indentLevel -= 1;\n  return svg;\n};\n/**\n * create indent string in accordance with the current node level.\n *\n * @type {(config: Options, state: State) => string}\n */\n\n\nconst createIndent = (config, state) => {\n  let indent = '';\n\n  if (config.pretty && state.textContext == null) {\n    indent = state.indent.repeat(state.indentLevel - 1);\n  }\n\n  return indent;\n};\n/**\n * @type {(node: XastDoctype, config: Options) => string}\n */\n\n\nconst stringifyDoctype = (node, config) => {\n  return config.doctypeStart + node.data.doctype + config.doctypeEnd;\n};\n/**\n * @type {(node: XastInstruction, config: Options) => string}\n */\n\n\nconst stringifyInstruction = (node, config) => {\n  return config.procInstStart + node.name + ' ' + node.value + config.procInstEnd;\n};\n/**\n * @type {(node: XastComment, config: Options) => string}\n */\n\n\nconst stringifyComment = (node, config) => {\n  return config.commentStart + node.value + config.commentEnd;\n};\n/**\n * @type {(node: XastCdata, config: Options, state: State) => string}\n */\n\n\nconst stringifyCdata = (node, config, state) => {\n  return createIndent(config, state) + config.cdataStart + node.value + config.cdataEnd;\n};\n/**\n * @type {(node: XastElement, config: Options, state: State) => string}\n */\n\n\nconst stringifyElement = (node, config, state) => {\n  // beautiful injection for obtaining SVG information :)\n  if (node.name === 'svg' && node.attributes.width != null && node.attributes.height != null) {\n    state.width = node.attributes.width;\n    state.height = node.attributes.height;\n  } // empty element and short tag\n\n\n  if (node.children.length === 0) {\n    if (config.useShortTags) {\n      return createIndent(config, state) + config.tagShortStart + node.name + stringifyAttributes(node, config) + config.tagShortEnd;\n    } else {\n      return createIndent(config, state) + config.tagShortStart + node.name + stringifyAttributes(node, config) + config.tagOpenEnd + config.tagCloseStart + node.name + config.tagCloseEnd;\n    } // non-empty element\n\n  } else {\n    let tagOpenStart = config.tagOpenStart;\n    let tagOpenEnd = config.tagOpenEnd;\n    let tagCloseStart = config.tagCloseStart;\n    let tagCloseEnd = config.tagCloseEnd;\n    let openIndent = createIndent(config, state);\n    let closeIndent = createIndent(config, state);\n\n    if (state.textContext) {\n      tagOpenStart = defaults.tagOpenStart;\n      tagOpenEnd = defaults.tagOpenEnd;\n      tagCloseStart = defaults.tagCloseStart;\n      tagCloseEnd = defaults.tagCloseEnd;\n      openIndent = '';\n    } else if (textElems.includes(node.name)) {\n      tagOpenEnd = defaults.tagOpenEnd;\n      tagCloseStart = defaults.tagCloseStart;\n      closeIndent = '';\n      state.textContext = node;\n    }\n\n    const children = stringifyNode(node, config, state);\n\n    if (state.textContext === node) {\n      state.textContext = null;\n    }\n\n    return openIndent + tagOpenStart + node.name + stringifyAttributes(node, config) + tagOpenEnd + children + closeIndent + tagCloseStart + node.name + tagCloseEnd;\n  }\n};\n/**\n * @type {(node: XastElement, config: Options) => string}\n */\n\n\nconst stringifyAttributes = (node, config) => {\n  let attrs = '';\n\n  for (const [name, value] of Object.entries(node.attributes)) {\n    // TODO remove attributes without values support in v3\n    if (value !== undefined) {\n      const encodedValue = value.toString().replace(config.regValEntities, config.encodeEntity);\n      attrs += ' ' + name + config.attrStart + encodedValue + config.attrEnd;\n    } else {\n      attrs += ' ' + name;\n    }\n  }\n\n  return attrs;\n};\n/**\n * @type {(node: XastText, config: Options, state: State) => string}\n */\n\n\nconst stringifyText = (node, config, state) => {\n  return createIndent(config, state) + config.textStart + node.value.replace(config.regEntities, config.encodeEntity) + (state.textContext ? '' : config.textEnd);\n};","map":{"version":3,"sources":["/home/hp/Js/React_practise/BookStore/books/node_modules/postcss-svgo/node_modules/svgo/lib/stringifier.js"],"names":["textElems","require","encodeEntity","char","entities","defaults","doctypeStart","doctypeEnd","procInstStart","procInstEnd","tagOpenStart","tagOpenEnd","tagCloseStart","tagCloseEnd","tagShortStart","tagShortEnd","attrStart","attrEnd","commentStart","commentEnd","cdataStart","cdataEnd","textStart","textEnd","indent","regEntities","regValEntities","pretty","useShortTags","eol","finalNewline","stringifySvg","data","userOptions","config","newIndent","Number","isNaN","repeat","state","width","undefined","height","textContext","indentLevel","svg","stringifyNode","length","info","exports","item","children","type","stringifyElement","stringifyText","stringifyDoctype","stringifyInstruction","stringifyComment","stringifyCdata","createIndent","node","doctype","name","value","attributes","stringifyAttributes","openIndent","closeIndent","includes","attrs","Object","entries","encodedValue","toString","replace"],"mappings":"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","sourcesContent":["'use strict';\n\n/**\n * @typedef {import('./types').XastParent} XastParent\n * @typedef {import('./types').XastRoot} XastRoot\n * @typedef {import('./types').XastElement} XastElement\n * @typedef {import('./types').XastInstruction} XastInstruction\n * @typedef {import('./types').XastDoctype} XastDoctype\n * @typedef {import('./types').XastText} XastText\n * @typedef {import('./types').XastCdata} XastCdata\n * @typedef {import('./types').XastComment} XastComment\n * @typedef {import('./types').StringifyOptions} StringifyOptions\n */\n\nconst { textElems } = require('../plugins/_collections.js');\n\n/**\n * @typedef {{\n *   width: void | string,\n *   height: void | string,\n *   indent: string,\n *   textContext: null | XastElement,\n *   indentLevel: number,\n * }} State\n */\n\n/**\n * @typedef {Required<StringifyOptions>} Options\n */\n\n/**\n * @type {(char: string) => string}\n */\nconst encodeEntity = (char) => {\n  return entities[char];\n};\n\n/**\n * @type {Options}\n */\nconst defaults = {\n  doctypeStart: '<!DOCTYPE',\n  doctypeEnd: '>',\n  procInstStart: '<?',\n  procInstEnd: '?>',\n  tagOpenStart: '<',\n  tagOpenEnd: '>',\n  tagCloseStart: '</',\n  tagCloseEnd: '>',\n  tagShortStart: '<',\n  tagShortEnd: '/>',\n  attrStart: '=\"',\n  attrEnd: '\"',\n  commentStart: '<!--',\n  commentEnd: '-->',\n  cdataStart: '<![CDATA[',\n  cdataEnd: ']]>',\n  textStart: '',\n  textEnd: '',\n  indent: 4,\n  regEntities: /[&'\"<>]/g,\n  regValEntities: /[&\"<>]/g,\n  encodeEntity: encodeEntity,\n  pretty: false,\n  useShortTags: true,\n  eol: 'lf',\n  finalNewline: false,\n};\n\n/**\n * @type {Record<string, string>}\n */\nconst entities = {\n  '&': '&amp;',\n  \"'\": '&apos;',\n  '\"': '&quot;',\n  '>': '&gt;',\n  '<': '&lt;',\n};\n\n/**\n * convert XAST to SVG string\n *\n * @type {(data: XastRoot, config: StringifyOptions) => {\n *   data: string,\n *   info: {\n *     width: void | string,\n *     height: void | string\n *   }\n * }}\n */\nconst stringifySvg = (data, userOptions = {}) => {\n  /**\n   * @type {Options}\n   */\n  const config = { ...defaults, ...userOptions };\n  const indent = config.indent;\n  let newIndent = '    ';\n  if (typeof indent === 'number' && Number.isNaN(indent) === false) {\n    newIndent = indent < 0 ? '\\t' : ' '.repeat(indent);\n  } else if (typeof indent === 'string') {\n    newIndent = indent;\n  }\n  /**\n   * @type {State}\n   */\n  const state = {\n    // TODO remove width and height in v3\n    width: undefined,\n    height: undefined,\n    indent: newIndent,\n    textContext: null,\n    indentLevel: 0,\n  };\n  const eol = config.eol === 'crlf' ? '\\r\\n' : '\\n';\n  if (config.pretty) {\n    config.doctypeEnd += eol;\n    config.procInstEnd += eol;\n    config.commentEnd += eol;\n    config.cdataEnd += eol;\n    config.tagShortEnd += eol;\n    config.tagOpenEnd += eol;\n    config.tagCloseEnd += eol;\n    config.textEnd += eol;\n  }\n  let svg = stringifyNode(data, config, state);\n  if (config.finalNewline && svg.length > 0 && svg[svg.length - 1] !== '\\n') {\n    svg += eol;\n  }\n  return {\n    data: svg,\n    info: {\n      width: state.width,\n      height: state.height,\n    },\n  };\n};\nexports.stringifySvg = stringifySvg;\n\n/**\n * @type {(node: XastParent, config: Options, state: State) => string}\n */\nconst stringifyNode = (data, config, state) => {\n  let svg = '';\n  state.indentLevel += 1;\n  for (const item of data.children) {\n    if (item.type === 'element') {\n      svg += stringifyElement(item, config, state);\n    }\n    if (item.type === 'text') {\n      svg += stringifyText(item, config, state);\n    }\n    if (item.type === 'doctype') {\n      svg += stringifyDoctype(item, config);\n    }\n    if (item.type === 'instruction') {\n      svg += stringifyInstruction(item, config);\n    }\n    if (item.type === 'comment') {\n      svg += stringifyComment(item, config);\n    }\n    if (item.type === 'cdata') {\n      svg += stringifyCdata(item, config, state);\n    }\n  }\n  state.indentLevel -= 1;\n  return svg;\n};\n\n/**\n * create indent string in accordance with the current node level.\n *\n * @type {(config: Options, state: State) => string}\n */\nconst createIndent = (config, state) => {\n  let indent = '';\n  if (config.pretty && state.textContext == null) {\n    indent = state.indent.repeat(state.indentLevel - 1);\n  }\n  return indent;\n};\n\n/**\n * @type {(node: XastDoctype, config: Options) => string}\n */\nconst stringifyDoctype = (node, config) => {\n  return config.doctypeStart + node.data.doctype + config.doctypeEnd;\n};\n\n/**\n * @type {(node: XastInstruction, config: Options) => string}\n */\nconst stringifyInstruction = (node, config) => {\n  return (\n    config.procInstStart + node.name + ' ' + node.value + config.procInstEnd\n  );\n};\n\n/**\n * @type {(node: XastComment, config: Options) => string}\n */\nconst stringifyComment = (node, config) => {\n  return config.commentStart + node.value + config.commentEnd;\n};\n\n/**\n * @type {(node: XastCdata, config: Options, state: State) => string}\n */\nconst stringifyCdata = (node, config, state) => {\n  return (\n    createIndent(config, state) +\n    config.cdataStart +\n    node.value +\n    config.cdataEnd\n  );\n};\n\n/**\n * @type {(node: XastElement, config: Options, state: State) => string}\n */\nconst stringifyElement = (node, config, state) => {\n  // beautiful injection for obtaining SVG information :)\n  if (\n    node.name === 'svg' &&\n    node.attributes.width != null &&\n    node.attributes.height != null\n  ) {\n    state.width = node.attributes.width;\n    state.height = node.attributes.height;\n  }\n\n  // empty element and short tag\n  if (node.children.length === 0) {\n    if (config.useShortTags) {\n      return (\n        createIndent(config, state) +\n        config.tagShortStart +\n        node.name +\n        stringifyAttributes(node, config) +\n        config.tagShortEnd\n      );\n    } else {\n      return (\n        createIndent(config, state) +\n        config.tagShortStart +\n        node.name +\n        stringifyAttributes(node, config) +\n        config.tagOpenEnd +\n        config.tagCloseStart +\n        node.name +\n        config.tagCloseEnd\n      );\n    }\n    // non-empty element\n  } else {\n    let tagOpenStart = config.tagOpenStart;\n    let tagOpenEnd = config.tagOpenEnd;\n    let tagCloseStart = config.tagCloseStart;\n    let tagCloseEnd = config.tagCloseEnd;\n    let openIndent = createIndent(config, state);\n    let closeIndent = createIndent(config, state);\n\n    if (state.textContext) {\n      tagOpenStart = defaults.tagOpenStart;\n      tagOpenEnd = defaults.tagOpenEnd;\n      tagCloseStart = defaults.tagCloseStart;\n      tagCloseEnd = defaults.tagCloseEnd;\n      openIndent = '';\n    } else if (textElems.includes(node.name)) {\n      tagOpenEnd = defaults.tagOpenEnd;\n      tagCloseStart = defaults.tagCloseStart;\n      closeIndent = '';\n      state.textContext = node;\n    }\n\n    const children = stringifyNode(node, config, state);\n\n    if (state.textContext === node) {\n      state.textContext = null;\n    }\n\n    return (\n      openIndent +\n      tagOpenStart +\n      node.name +\n      stringifyAttributes(node, config) +\n      tagOpenEnd +\n      children +\n      closeIndent +\n      tagCloseStart +\n      node.name +\n      tagCloseEnd\n    );\n  }\n};\n\n/**\n * @type {(node: XastElement, config: Options) => string}\n */\nconst stringifyAttributes = (node, config) => {\n  let attrs = '';\n  for (const [name, value] of Object.entries(node.attributes)) {\n    // TODO remove attributes without values support in v3\n    if (value !== undefined) {\n      const encodedValue = value\n        .toString()\n        .replace(config.regValEntities, config.encodeEntity);\n      attrs += ' ' + name + config.attrStart + encodedValue + config.attrEnd;\n    } else {\n      attrs += ' ' + name;\n    }\n  }\n  return attrs;\n};\n\n/**\n * @type {(node: XastText, config: Options, state: State) => string}\n */\nconst stringifyText = (node, config, state) => {\n  return (\n    createIndent(config, state) +\n    config.textStart +\n    node.value.replace(config.regEntities, config.encodeEntity) +\n    (state.textContext ? '' : config.textEnd)\n  );\n};\n"]},"metadata":{},"sourceType":"script"}