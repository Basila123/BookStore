{"ast":null,"code":"'use strict';\n\nconst browserslist = require('browserslist');\n\nconst {\n  isSupported\n} = require('caniuse-api');\n\nconst valueParser = require('postcss-value-parser');\n\nconst minifyColor = require('./minifyColor');\n\nfunction walk(parent, callback) {\n  parent.nodes.forEach((node, index) => {\n    const bubble = callback(node, index, parent);\n\n    if (node.nodes && bubble !== false) {\n      walk(node, callback);\n    }\n  });\n}\n/*\n * IE 8 & 9 do not properly handle clicks on elements\n * with a `transparent` `background-color`.\n *\n * https://developer.mozilla.org/en-US/docs/Web/Events/click#Internet_Explorer\n */\n\n\nconst browsersWithTransparentBug = new Set(['ie 8', 'ie 9']);\nconst mathFunctions = new Set(['calc', 'min', 'max', 'clamp']);\n\nfunction isMathFunctionNode(node) {\n  if (node.type !== 'function') {\n    return false;\n  }\n\n  return mathFunctions.has(node.value.toLowerCase());\n}\n\nfunction transform(value, options) {\n  const parsed = valueParser(value);\n  walk(parsed, (node, index, parent) => {\n    if (node.type === 'function') {\n      if (/^(rgb|hsl)a?$/i.test(node.value)) {\n        const {\n          value: originalValue\n        } = node;\n        node.value = minifyColor(valueParser.stringify(node), options);\n        node.type = 'word';\n        const next = parent.nodes[index + 1];\n\n        if (node.value !== originalValue && next && (next.type === 'word' || next.type === 'function')) {\n          parent.nodes.splice(index + 1, 0, {\n            type: 'space',\n            value: ' '\n          });\n        }\n      } else if (isMathFunctionNode(node)) {\n        return false;\n      }\n    } else if (node.type === 'word') {\n      node.value = minifyColor(node.value, options);\n    }\n  });\n  return parsed.toString();\n}\n\nfunction addPluginDefaults(options, browsers) {\n  const defaults = {\n    // Does the browser support 4 & 8 character hex notation\n    transparent: browsers.some(b => browsersWithTransparentBug.has(b)) === false,\n    // Does the browser support \"transparent\" value properly\n    alphaHex: isSupported('css-rrggbbaa', browsers),\n    name: true\n  };\n  return { ...defaults,\n    ...options\n  };\n}\n\nfunction pluginCreator() {\n  let config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return {\n    postcssPlugin: 'postcss-colormin',\n\n    prepare(result) {\n      const resultOptions = result.opts || {};\n      const browsers = browserslist(null, {\n        stats: resultOptions.stats,\n        path: __dirname,\n        env: resultOptions.env\n      });\n      const cache = new Map();\n      const options = addPluginDefaults(config, browsers);\n      return {\n        OnceExit(css) {\n          css.walkDecls(decl => {\n            if (/^(composes|font|filter|-webkit-tap-highlight-color)/i.test(decl.prop)) {\n              return;\n            }\n\n            const value = decl.value;\n\n            if (!value) {\n              return;\n            }\n\n            const cacheKey = JSON.stringify({\n              value,\n              options,\n              browsers\n            });\n\n            if (cache.has(cacheKey)) {\n              decl.value = cache.get(cacheKey);\n              return;\n            }\n\n            const newValue = transform(value, options);\n            decl.value = newValue;\n            cache.set(cacheKey, newValue);\n          });\n        }\n\n      };\n    }\n\n  };\n}\n\npluginCreator.postcss = true;\nmodule.exports = pluginCreator;","map":{"version":3,"sources":["/home/hp/Js/React_practise/BookStore/books/node_modules/postcss-colormin/src/index.js"],"names":["browserslist","require","isSupported","valueParser","minifyColor","walk","parent","callback","nodes","forEach","node","index","bubble","browsersWithTransparentBug","Set","mathFunctions","isMathFunctionNode","type","has","value","toLowerCase","transform","options","parsed","test","originalValue","stringify","next","splice","toString","addPluginDefaults","browsers","defaults","transparent","some","b","alphaHex","name","pluginCreator","config","postcssPlugin","prepare","result","resultOptions","opts","stats","path","__dirname","env","cache","Map","OnceExit","css","walkDecls","decl","prop","cacheKey","JSON","get","newValue","set","postcss","module","exports"],"mappings":"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","sourcesContent":["'use strict';\nconst browserslist = require('browserslist');\nconst { isSupported } = require('caniuse-api');\nconst valueParser = require('postcss-value-parser');\nconst minifyColor = require('./minifyColor');\n\nfunction walk(parent, callback) {\n  parent.nodes.forEach((node, index) => {\n    const bubble = callback(node, index, parent);\n\n    if (node.nodes && bubble !== false) {\n      walk(node, callback);\n    }\n  });\n}\n\n/*\n * IE 8 & 9 do not properly handle clicks on elements\n * with a `transparent` `background-color`.\n *\n * https://developer.mozilla.org/en-US/docs/Web/Events/click#Internet_Explorer\n */\nconst browsersWithTransparentBug = new Set(['ie 8', 'ie 9']);\nconst mathFunctions = new Set(['calc', 'min', 'max', 'clamp']);\n\nfunction isMathFunctionNode(node) {\n  if (node.type !== 'function') {\n    return false;\n  }\n  return mathFunctions.has(node.value.toLowerCase());\n}\n\nfunction transform(value, options) {\n  const parsed = valueParser(value);\n\n  walk(parsed, (node, index, parent) => {\n    if (node.type === 'function') {\n      if (/^(rgb|hsl)a?$/i.test(node.value)) {\n        const { value: originalValue } = node;\n\n        node.value = minifyColor(valueParser.stringify(node), options);\n        node.type = 'word';\n\n        const next = parent.nodes[index + 1];\n\n        if (\n          node.value !== originalValue &&\n          next &&\n          (next.type === 'word' || next.type === 'function')\n        ) {\n          parent.nodes.splice(index + 1, 0, {\n            type: 'space',\n            value: ' ',\n          });\n        }\n      } else if (isMathFunctionNode(node)) {\n        return false;\n      }\n    } else if (node.type === 'word') {\n      node.value = minifyColor(node.value, options);\n    }\n  });\n\n  return parsed.toString();\n}\n\nfunction addPluginDefaults(options, browsers) {\n  const defaults = {\n    // Does the browser support 4 & 8 character hex notation\n    transparent:\n      browsers.some((b) => browsersWithTransparentBug.has(b)) === false,\n    // Does the browser support \"transparent\" value properly\n    alphaHex: isSupported('css-rrggbbaa', browsers),\n    name: true,\n  };\n  return { ...defaults, ...options };\n}\n\nfunction pluginCreator(config = {}) {\n  return {\n    postcssPlugin: 'postcss-colormin',\n\n    prepare(result) {\n      const resultOptions = result.opts || {};\n      const browsers = browserslist(null, {\n        stats: resultOptions.stats,\n        path: __dirname,\n        env: resultOptions.env,\n      });\n\n      const cache = new Map();\n      const options = addPluginDefaults(config, browsers);\n\n      return {\n        OnceExit(css) {\n          css.walkDecls((decl) => {\n            if (\n              /^(composes|font|filter|-webkit-tap-highlight-color)/i.test(\n                decl.prop\n              )\n            ) {\n              return;\n            }\n\n            const value = decl.value;\n\n            if (!value) {\n              return;\n            }\n\n            const cacheKey = JSON.stringify({ value, options, browsers });\n\n            if (cache.has(cacheKey)) {\n              decl.value = cache.get(cacheKey);\n\n              return;\n            }\n\n            const newValue = transform(value, options);\n\n            decl.value = newValue;\n            cache.set(cacheKey, newValue);\n          });\n        },\n      };\n    },\n  };\n}\n\npluginCreator.postcss = true;\nmodule.exports = pluginCreator;\n"]},"metadata":{},"sourceType":"script"}