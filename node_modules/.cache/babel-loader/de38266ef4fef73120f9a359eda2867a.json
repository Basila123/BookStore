{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst sequences = {};\nconst DEFAULTS = {\n  timestamp: () => () => Date.now(),\n  datetime: () => () => new Date().toISOString(),\n  date: () => () => new Date().toISOString().slice(0, 10),\n  time: () => () => new Date().toISOString().slice(11),\n  random: () => () => Math.random(),\n  randomint: args => {\n    var _a;\n\n    const max = (_a = args === null || args === void 0 ? void 0 : args.max) !== null && _a !== void 0 ? _a : 2;\n    return () => Math.floor(Math.random() * max);\n  },\n  seq: args => {\n    var _a;\n\n    const name = (_a = args === null || args === void 0 ? void 0 : args.name) !== null && _a !== void 0 ? _a : \"\";\n    sequences[name] || (sequences[name] = 0);\n    return () => sequences[name]++;\n  }\n};\nconst getDef = Object.assign(_getDef, {\n  DEFAULTS\n});\n\nfunction _getDef() {\n  return {\n    keyword: \"dynamicDefaults\",\n    type: \"object\",\n    schemaType: [\"string\", \"object\"],\n    modifying: true,\n    valid: true,\n\n    compile(schema, _parentSchema, it) {\n      if (!it.opts.useDefaults || it.compositeRule) return () => true;\n      const fs = {};\n\n      for (const key in schema) fs[key] = getDefault(schema[key]);\n\n      const empty = it.opts.useDefaults === \"empty\";\n      return data => {\n        for (const prop in schema) {\n          if (data[prop] === undefined || empty && (data[prop] === null || data[prop] === \"\")) {\n            data[prop] = fs[prop]();\n          }\n        }\n\n        return true;\n      };\n    },\n\n    metaSchema: {\n      type: \"object\",\n      additionalProperties: {\n        anyOf: [{\n          type: \"string\"\n        }, {\n          type: \"object\",\n          additionalProperties: false,\n          required: [\"func\", \"args\"],\n          properties: {\n            func: {\n              type: \"string\"\n            },\n            args: {\n              type: \"object\"\n            }\n          }\n        }]\n      }\n    }\n  };\n}\n\nfunction getDefault(d) {\n  return typeof d == \"object\" ? getObjDefault(d) : getStrDefault(d);\n}\n\nfunction getObjDefault(_ref) {\n  let {\n    func,\n    args\n  } = _ref;\n  const def = DEFAULTS[func];\n  assertDefined(func, def);\n  return def(args);\n}\n\nfunction getStrDefault() {\n  let d = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  const def = DEFAULTS[d];\n  assertDefined(d, def);\n  return def();\n}\n\nfunction assertDefined(name, def) {\n  if (!def) throw new Error(`invalid \"dynamicDefaults\" keyword property value: ${name}`);\n}\n\nexports.default = getDef;\nmodule.exports = getDef;","map":{"version":3,"mappings":"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","names":["sequences","DEFAULTS","timestamp","Date","now","datetime","toISOString","date","slice","time","random","Math","randomint","args","max","_a","floor","seq","name","getDef","Object","assign","_getDef","keyword","type","schemaType","modifying","valid","compile","schema","_parentSchema","it","opts","useDefaults","compositeRule","fs","key","getDefault","empty","data","prop","undefined","metaSchema","additionalProperties","anyOf","required","properties","func","d","getObjDefault","getStrDefault","def","assertDefined","Error","exports","module"],"sources":["/home/hp/Js/React_practise/BookStore/books/node_modules/css-minimizer-webpack-plugin/node_modules/ajv-keywords/src/definitions/dynamicDefaults.ts"],"sourcesContent":["import type {FuncKeywordDefinition, SchemaCxt} from \"ajv\"\n\nconst sequences: Record<string, number | undefined> = {}\n\nexport type DynamicDefaultFunc = (args?: Record<string, any>) => () => any\n\nconst DEFAULTS: Record<string, DynamicDefaultFunc | undefined> = {\n  timestamp: () => () => Date.now(),\n  datetime: () => () => new Date().toISOString(),\n  date: () => () => new Date().toISOString().slice(0, 10),\n  time: () => () => new Date().toISOString().slice(11),\n  random: () => () => Math.random(),\n  randomint: (args?: {max?: number}) => {\n    const max = args?.max ?? 2\n    return () => Math.floor(Math.random() * max)\n  },\n  seq: (args?: {name?: string}) => {\n    const name = args?.name ?? \"\"\n    sequences[name] ||= 0\n    return () => (sequences[name] as number)++\n  },\n}\n\ninterface PropertyDefaultSchema {\n  func: string\n  args: Record<string, any>\n}\n\ntype DefaultSchema = Record<string, string | PropertyDefaultSchema | undefined>\n\nconst getDef: (() => FuncKeywordDefinition) & {\n  DEFAULTS: typeof DEFAULTS\n} = Object.assign(_getDef, {DEFAULTS})\n\nfunction _getDef(): FuncKeywordDefinition {\n  return {\n    keyword: \"dynamicDefaults\",\n    type: \"object\",\n    schemaType: [\"string\", \"object\"],\n    modifying: true,\n    valid: true,\n    compile(schema: DefaultSchema, _parentSchema, it: SchemaCxt) {\n      if (!it.opts.useDefaults || it.compositeRule) return () => true\n      const fs: Record<string, () => any> = {}\n      for (const key in schema) fs[key] = getDefault(schema[key])\n      const empty = it.opts.useDefaults === \"empty\"\n\n      return (data: Record<string, any>) => {\n        for (const prop in schema) {\n          if (data[prop] === undefined || (empty && (data[prop] === null || data[prop] === \"\"))) {\n            data[prop] = fs[prop]()\n          }\n        }\n        return true\n      }\n    },\n    metaSchema: {\n      type: \"object\",\n      additionalProperties: {\n        anyOf: [\n          {type: \"string\"},\n          {\n            type: \"object\",\n            additionalProperties: false,\n            required: [\"func\", \"args\"],\n            properties: {\n              func: {type: \"string\"},\n              args: {type: \"object\"},\n            },\n          },\n        ],\n      },\n    },\n  }\n}\n\nfunction getDefault(d: string | PropertyDefaultSchema | undefined): () => any {\n  return typeof d == \"object\" ? getObjDefault(d) : getStrDefault(d)\n}\n\nfunction getObjDefault({func, args}: PropertyDefaultSchema): () => any {\n  const def = DEFAULTS[func]\n  assertDefined(func, def)\n  return def(args)\n}\n\nfunction getStrDefault(d = \"\"): () => any {\n  const def = DEFAULTS[d]\n  assertDefined(d, def)\n  return def()\n}\n\nfunction assertDefined(name: string, def?: DynamicDefaultFunc): asserts def is DynamicDefaultFunc {\n  if (!def) throw new Error(`invalid \"dynamicDefaults\" keyword property value: ${name}`)\n}\n\nexport default getDef\nmodule.exports = getDef\n"]},"metadata":{},"sourceType":"script"}